# æœªä½¿ç”¨å‡½æ•°åˆ é™¤è®¡åˆ’

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**ç”Ÿæˆæ—¥æœŸ**: 2025-11-17
**åˆ†æèŒƒå›´**: å…¨ä»£ç åº“æœªä½¿ç”¨å‡½æ•°é™æ€åˆ†æ
**é£é™©è¯„ä¼°**: ä½ - æ‰€æœ‰å‡½æ•°å‡ç»è¿‡å…¨é¢è°ƒç”¨é“¾åˆ†æ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æœ¬æ–‡æ¡£åŸºäºå¯¹é¡¹ç›®å…¨éƒ¨æºä»£ç çš„é™æ€åˆ†æï¼Œè¯†åˆ«å¹¶è¯„ä¼°äº†æ‰€æœ‰æœªè¢«è°ƒç”¨çš„å‡½æ•°ã€‚åˆ†ææ¶µç›–äº†6ä¸ªä¸»è¦æ¨¡å—ï¼Œå…±è®¡**42ä¸ªå‡½æ•°**ã€‚

**æ ¸å¿ƒå‘ç°**:
- âœ… **å¯ç«‹å³åˆ é™¤**: 27ä¸ªå‡½æ•°ï¼ˆ~320è¡Œä»£ç ï¼‰
- âš ï¸ **å»ºè®®ä¿ç•™**: 10ä¸ªå‡½æ•°ï¼ˆè®¾è®¡å®Œæ•´æ€§ã€å…¬å…±APIï¼‰
- ğŸ”„ **å¾…è¯„ä¼°**: 5ä¸ªå‡½æ•°ï¼ˆéœ€è¦è¿›ä¸€æ­¥ç¡®è®¤ï¼‰

**é¢„æœŸæ”¶ç›Š**:
- å‡å°‘çº¦ 320 è¡Œæœªä½¿ç”¨ä»£ç ï¼ˆ~2.8% ä»£ç åº“ï¼‰
- ç®€åŒ– API è¡¨é¢é¢ç§¯
- æå‡ä»£ç å¯ç»´æŠ¤æ€§
- æ¶ˆé™¤æŠ€æœ¯å€ºåŠ¡

---

## ğŸ“Š æ¨¡å—åˆ†ææ±‡æ€»è¡¨

| æ¨¡å— | æœªä½¿ç”¨å‡½æ•°æ•° | å¯åˆ é™¤ | å»ºè®®ä¿ç•™ | å¾…è¯„ä¼° | ä»£ç è¡Œæ•° |
|------|-------------|--------|----------|--------|----------|
| **AlgorithmContext** | 3 | 3 | 0 | 0 | ~40 |
| **AlgorithmManager** | 1 | 1 | 0 | 0 | ~68 |
| **AlgorithmCoordinator** | 1 | 0 | 0 | 1 | ~27 |
| **HistoryManager** | 4 | 2 | 2 | 0 | ~15 |
| **AlgorithmResult** | 11 | 9 | 2 | 0 | ~66 |
| **ThermalCurve** | 5 | 4 | 1 | 0 | ~25 |
| **BaselineCorrectionAlgorithm** | 1 | 1 | 0 | 0 | ~21 |
| **ChartView** | 4 | 2 | 0 | 2 | ~30 |
| **ThermalChart** | 6 | 4 | 2 | 0 | ~77 |
| **ThermalChartView** | 0 | 0 | 0 | 0 | 0 |
| **PeakAreaTool** | 3 | 3 | 0 | 0 | ~15 |
| **TrapezoidMeasureTool** | 3 | 3 | 0 | 0 | ~8 |
| **æ€»è®¡** | **42** | **27** | **10** | **5** | **~392** |

---

## ğŸ¯ åˆ é™¤ä¼˜å…ˆçº§åˆ†ç±»

### Priority 1: ç«‹å³åˆ é™¤ï¼ˆé›¶é£é™©ï¼‰âœ…

è¿™äº›å‡½æ•°å®Œå…¨æœªè¢«ä½¿ç”¨ï¼Œæ— ä»»ä½•ä¾èµ–ï¼Œåˆ é™¤é£é™©ä¸ºé›¶ã€‚

#### 1.1 AlgorithmContextï¼ˆ3ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `value(const QString&, const QVariant&) const` | algorithm_context.h:313 | ~4 | è¢« `get<T>()` æ¨¡æ¿æ–¹æ³•å®Œå…¨æ›¿ä»£ |
| `values(const QString&) const` | algorithm_context.h:372 | ~10 | æ— å®é™…ä½¿ç”¨åœºæ™¯ï¼Œè¿”å›ç±»å‹ä¸å®‰å…¨ |
| `clear()` | algorithm_context.h:358 | ~11 | ä½¿ç”¨æ¨¡å¼æ˜¯å¢é‡æ›´æ–°ï¼Œæ— éœ€æ¸…ç©º |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/application/algorithm/algorithm_context.h: ç¬¬313, 358, 372è¡Œ
Analysis/src/application/algorithm/algorithm_context.cpp: ç¬¬12-15, 42-52, 69-78è¡Œ
```

**éªŒè¯å‘½ä»¤**:
```bash
grep -r "\.value(" --include="*.cpp" --include="*.h" | grep -v "algorithm_context"
grep -r "\.values(" --include="*.cpp" --include="*.h" | grep -v "algorithm_context"
grep -r "\.clear()" --include="*.cpp" --include="*.h" | grep -v "algorithm_context"
```

---

#### 1.2 AlgorithmManagerï¼ˆ1ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `executeWithContext(const QString&, AlgorithmContext*)` | algorithm_manager.h:56 | ~68 | å·²è¢«å¼‚æ­¥ç‰ˆæœ¬ `executeAsync()` å®Œå…¨æ›¿ä»£ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/application/algorithm/algorithm_manager.h: ç¬¬56è¡Œ
Analysis/src/application/algorithm/algorithm_manager.cpp: ç¬¬53-120è¡Œ
```

**éªŒè¯å‘½ä»¤**:
```bash
grep -r "executeWithContext" --include="*.cpp" --include="*.h" | grep -v "algorithm_manager"
```

---

#### 1.3 HistoryManagerï¼ˆ2ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `undoCount() const` | history_manager.h | ~3 | ä¸ `canUndo()` åŠŸèƒ½é‡å¤ |
| `redoCount() const` | history_manager.h | ~3 | ä¸ `canRedo()` åŠŸèƒ½é‡å¤ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/application/history/history_manager.h: æŸ¥æ‰¾å¹¶åˆ é™¤å£°æ˜
Analysis/src/application/history/history_manager.cpp: æŸ¥æ‰¾å¹¶åˆ é™¤å®ç°
```

**éªŒè¯å‘½ä»¤**:
```bash
grep -r "undoCount()" --include="*.cpp" --include="*.h"
grep -r "redoCount()" --include="*.cpp" --include="*.h"
```

---

#### 1.4 AlgorithmResultï¼ˆ9ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `addCurve(const ThermalCurve&)` | algorithm_result.h | ~5 | ç”¨ `setCurve()` æ›¿ä»£ |
| `primaryCurve() const` | algorithm_result.h | ~5 | ç”¨ `curves()` + æ£€æŸ¥æ›¿ä»£ |
| `setMarkers(const QList<QPointF>&)` | algorithm_result.h | ~5 | ç”¨ `addMarker()` æ›¿ä»£ |
| `setRegions(const QList<QPolygonF>&)` | algorithm_result.h | ~5 | å¾…å®ç°åŠŸèƒ½ |
| `regions() const` | algorithm_result.h | ~5 | å¾…å®ç°åŠŸèƒ½ |
| `setPeakPosition(const QPointF&)` | algorithm_result.h | ~5 | ç”¨ `setMeta()` æ›¿ä»£ |
| `peakPosition() const` | algorithm_result.h | ~5 | ç”¨ `metaValue()` æ›¿ä»£ |
| `signalType() const` | algorithm_result.h | ~5 | ç”¨ `metaValue()` æ›¿ä»£ |
| `OutputKeys::historyResult(const QString&, int)` | algorithm_result.h | ~5 | å¾…å®ç°åŠŸèƒ½ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/domain/algorithm/algorithm_result.h: æŸ¥æ‰¾å¹¶åˆ é™¤æ‰€æœ‰å£°æ˜
Analysis/src/domain/algorithm/algorithm_result.cpp: æŸ¥æ‰¾å¹¶åˆ é™¤æ‰€æœ‰å®ç°
```

**éªŒè¯å‘½ä»¤**:
```bash
grep -r "addCurve(" --include="*.cpp" --include="*.h" | grep -v "algorithm_result"
grep -r "primaryCurve()" --include="*.cpp" --include="*.h"
grep -r "setMarkers(" --include="*.cpp" --include="*.h"
grep -r "setRegions(" --include="*.cpp" --include="*.h"
grep -r "regions()" --include="*.cpp" --include="*.h"
```

---

#### 1.5 ThermalCurveï¼ˆ4ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `plotStyle() const` | thermal_curve.h:84 | ~3 | UIæ ·å¼ä¸åº”åœ¨æ•°æ®æ¨¡å‹å±‚ |
| `setPlotStyle(PlotStyle)` | thermal_curve.h:98 | ~3 | UIæ ·å¼ä¸åº”åœ¨æ•°æ®æ¨¡å‹å±‚ |
| `setName(const QString&)` | thermal_curve.h:90 | ~3 | æ›²çº¿åç§°é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®ï¼Œæ— éœ€setter |
| `resetToRaw()` | thermal_curve.h:119 | ~5 | åŠŸèƒ½è¢« HistoryManager æ’¤é”€æœºåˆ¶æ›¿ä»£ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/domain/model/thermal_curve.h: ç¬¬84, 90, 98, 119è¡Œ
Analysis/src/domain/model/thermal_curve.cpp: ç¬¬44, 52, 72, 80è¡Œ
```

**éªŒè¯å‘½ä»¤**:
```bash
grep -r "\.plotStyle()" --include="*.cpp" --include="*.h"
grep -r "\.setPlotStyle(" --include="*.cpp" --include="*.h"
grep -r "\.setName(" --include="*.cpp" --include="*.h"
grep -r "\.resetToRaw()" --include="*.cpp" --include="*.h"
```

---

#### 1.6 BaselineCorrectionAlgorithmï¼ˆ1ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `findNearestPoint(const QVector<ThermalDataPoint>&, double) const` | baseline_correction_algorithm.h:63 | ~21 | æ—©æœŸè®¾è®¡é—ç•™ï¼Œå®é™…ç®—æ³•ä¸ä½¿ç”¨ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/infrastructure/algorithm/baseline_correction_algorithm.h: ç¬¬63è¡Œ
Analysis/src/infrastructure/algorithm/baseline_correction_algorithm.cpp: ç¬¬266-286è¡Œ
```

**éªŒè¯å‘½ä»¤**:
```bash
grep -r "findNearestPoint" --include="*.cpp" --include="*.h"
```

---

#### 1.7 ChartViewï¼ˆ2ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `selectedPoints() const` | chart_view.h | ~3 | å®Œå…¨å†—ä½™ |
| `selectedPointsCurveId() const` | chart_view.h | ~3 | å®Œå…¨å†—ä½™ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/ui/chart_view.h: æŸ¥æ‰¾å¹¶åˆ é™¤å£°æ˜
Analysis/src/ui/chart_view.cpp: æŸ¥æ‰¾å¹¶åˆ é™¤å®ç°
```

---

#### 1.8 ThermalChartï¼ˆ4ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `toggleXAxisMode()` | thermal_chart.h:76 | ~5 | åªæ˜¯ `setXAxisMode()` çš„ä¾¿æ·åŒ…è£…ï¼ŒåŠŸèƒ½é‡å¤ |
| `rescaleYAxisForXRange(...)` | thermal_chart.h:206 | ~42 | æ¡†é€‰ç¼©æ”¾åŠŸèƒ½å·²é€šè¿‡å…¶ä»–æ–¹å¼å®ç° |
| `point1() const` | thermal_chart.h | ~3 | æœªä½¿ç”¨çš„getter |
| `point2() const` | thermal_chart.h | ~3 | æœªä½¿ç”¨çš„getter |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/ui/thermal_chart.h: ç¬¬76, 206è¡ŒåŠç›¸å…³getter
Analysis/src/ui/thermal_chart.cpp: ç¬¬646-650, 1048-1089è¡ŒåŠç›¸å…³å®ç°
```

---

#### 1.9 PeakAreaToolï¼ˆ3ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `point1() const` | peak_area_tool.h:108 | ~3 | æœªä½¿ç”¨çš„getterï¼Œå†…éƒ¨ç›´æ¥è®¿é—®æˆå‘˜ |
| `point2() const` | peak_area_tool.h:113 | ~3 | æœªä½¿ç”¨çš„getterï¼Œå†…éƒ¨ç›´æ¥è®¿é—®æˆå‘˜ |
| `areaPolygon() const` | peak_area_tool.h:128 | ~3 | æœªä½¿ç”¨çš„getterï¼Œæš´éœ²å†…éƒ¨æ•°æ®ç»“æ„ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/ui/peak_area_tool.h: ç¬¬105-128è¡Œ
```

---

#### 1.10 TrapezoidMeasureToolï¼ˆ3ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä½ç½® | è¡Œæ•° | åˆ é™¤ç†ç”± |
|---------|------|------|----------|
| `point1() const` | trapezoid_measure_tool.h:81 | ~3 | æœªä½¿ç”¨çš„getter |
| `point2() const` | trapezoid_measure_tool.h:86 | ~3 | æœªä½¿ç”¨çš„getter |
| `updatePosition()` | trapezoid_measure_tool.h:143 | ~5 | å­¤ç«‹çš„slotï¼Œæ— ä¿¡å·è¿æ¥ |

**åˆ é™¤ä½ç½®**:
```
Analysis/src/ui/trapezoid_measure_tool.h: ç¬¬78-86, 140-143è¡Œ
Analysis/src/ui/trapezoid_measure_tool.cpp: ç¬¬397-401è¡Œ
```

---

### Priority 2: å»ºè®®ä¿ç•™ï¼ˆè®¾è®¡å®Œæ•´æ€§ï¼‰âš ï¸

è¿™äº›å‡½æ•°è™½æœªä½¿ç”¨ï¼Œä½†å‡ºäºè®¾è®¡å®Œæ•´æ€§ã€APIä¸€è‡´æ€§æˆ–æœªæ¥æ‰©å±•æ€§è€ƒè™‘ï¼Œå»ºè®®ä¿ç•™ã€‚

#### 2.1 HistoryManagerï¼ˆ2ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä¿ç•™ç†ç”± |
|---------|----------|
| `setHistoryLimit(int)` | å…¬å…±é…ç½®APIï¼Œè™½å½“å‰ä½¿ç”¨é»˜è®¤å€¼ï¼Œä½†åº”ä¿ç•™é…ç½®èƒ½åŠ› |
| `historyLimit() const` | ä¸ setter é…å¯¹çš„ getterï¼Œç¬¦åˆ Qt å±æ€§æ¨¡å¼ |

---

#### 2.2 AlgorithmResultï¼ˆ2ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä¿ç•™ç†ç”± |
|---------|----------|
| `algorithmKey() const` | æ ¸å¿ƒå…ƒæ•°æ®ï¼Œç”¨äºç»“æœè¿½è¸ªå’Œå”¯ä¸€æ ‡è¯† |
| `timestamp() const` | å®¡è®¡è¿½è¸ªï¼Œè®°å½•ç®—æ³•æ‰§è¡Œæ—¶é—´ |

---

#### 2.3 ThermalCurveï¼ˆ1ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä¿ç•™ç†ç”± |
|---------|----------|
| `getRawData() const` | APIå¯¹ç§°æ€§è®¾è®¡ï¼Œä¸ `setRawData()` é…å¯¹ |

---

#### 2.4 ThermalChartï¼ˆ2ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä¿ç•™ç†ç”± |
|---------|----------|
| `setCustomTitles(...)` | å®Œæ•´çš„APIè®¾è®¡ï¼Œæœªæ¥å¯èƒ½éœ€è¦ |
| `clearCustomTitles()` | ä¸ setter é…å¯¹ï¼Œä¿æŒAPIå®Œæ•´æ€§ |

---

#### 2.5 ThermalChart Gettersï¼ˆ3ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | ä¿ç•™ç†ç”± |
|---------|----------|
| `primaryAxisY() const` | æ ‡å‡†public getterï¼Œæš´éœ²å†…éƒ¨çŠ¶æ€ |
| `secondaryAxisY() const` | æ ‡å‡†public getterï¼Œæš´éœ²å†…éƒ¨çŠ¶æ€ |
| `thermalChart() const` | ThermalChartViewçš„æ ‡å‡†getter |

---

### Priority 3: å¾…è¯„ä¼°ï¼ˆéœ€è¿›ä¸€æ­¥ç¡®è®¤ï¼‰ğŸ”„

è¿™äº›å‡½æ•°éœ€è¦åœ¨ç‰¹å®šåœºæ™¯ä¸‹è¿›ä¸€æ­¥è¯„ä¼°åå†å†³å®šæ˜¯å¦åˆ é™¤ã€‚

#### 3.1 AlgorithmCoordinatorï¼ˆ1ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | è¯„ä¼°ç†ç”± |
|---------|----------|
| `handleParameterSubmission(const QString&, const QVariantMap&)` | å®éªŒæ€§æ¶æ„çš„ä¸€éƒ¨åˆ†ï¼Œä¸ºå°†æ¥å‚æ•°å¯¹è¯æ¡†åŠŸèƒ½é¢„ç•™ã€‚éœ€è¦åœ¨å®ç°å‚æ•°å¯¹è¯æ¡†UIåé‡æ–°è¯„ä¼°ã€‚ |

**å»ºè®®**: ä¿ç•™è‡³ Phase 3ï¼ˆç®—æ³•æ‰©å±•é˜¶æ®µï¼‰å®Œæˆåå†è¯„ä¼°ã€‚

---

#### 3.2 ChartViewï¼ˆ4ä¸ªå‡½æ•°ï¼‰

| å‡½æ•°ç­¾å | è¯„ä¼°ç†ç”± |
|---------|----------|
| `verticalCrosshairEnabled() const` | æŸ¥è¯¢å™¨ï¼Œå¯èƒ½åœ¨æœªæ¥éœ€è¦ |
| `horizontalCrosshairEnabled() const` | æŸ¥è¯¢å™¨ï¼Œå¯èƒ½åœ¨æœªæ¥éœ€è¦ |
| `interactionState() const` | ä¿¡å·é©±åŠ¨æ¶æ„ä¸­å¯èƒ½å†—ä½™ |
| `activeAlgorithm() const` | å¯èƒ½åœ¨æœªæ¥äº¤äº’æµç¨‹ä¸­éœ€è¦ |

**å»ºè®®**: åœ¨åŸºçº¿æ ¡æ­£åŠŸèƒ½å®Œå…¨å®ç°åé‡æ–°è¯„ä¼°ã€‚

---

## ğŸ“ åˆ†é˜¶æ®µæ‰§è¡Œè®¡åˆ’

### Phase 1: ä½é£é™©åˆ é™¤ï¼ˆç¬¬1å‘¨ï¼‰

**ç›®æ ‡**: åˆ é™¤å®Œå…¨æœªä½¿ç”¨ä¸”æ— ä»»ä½•ä¾èµ–çš„å‡½æ•°

**èŒƒå›´**:
- AlgorithmContext: 3ä¸ªå‡½æ•°
- AlgorithmManager: 1ä¸ªå‡½æ•°
- HistoryManager: 2ä¸ªå‡½æ•°ï¼ˆundoCount/redoCountï¼‰
- BaselineCorrectionAlgorithm: 1ä¸ªå‡½æ•°

**é¢„æœŸæ”¶ç›Š**: åˆ é™¤çº¦120è¡Œä»£ç 

**æ‰§è¡Œæ­¥éª¤**:
1. å¤‡ä»½å½“å‰ä»£ç ï¼ˆåˆ›å»ºgitåˆ†æ”¯ï¼‰
2. é€ä¸ªåˆ é™¤å‡½æ•°
3. æ¯åˆ é™¤ä¸€ä¸ªæ¨¡å—åç¼–è¯‘éªŒè¯
4. è¿è¡ŒåŸºæœ¬åŠŸèƒ½æµ‹è¯•
5. æäº¤åˆ°ç‹¬ç«‹åˆ†æ”¯

**éªŒè¯æ¸…å•**:
- [ ] ç¼–è¯‘æ— é”™è¯¯
- [ ] æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡
- [ ] åŸºçº¿æ ¡æ­£ç®—æ³•åŠŸèƒ½æ­£å¸¸
- [ ] ç®—æ³•æ‰§è¡Œæµç¨‹æ­£å¸¸

---

### Phase 2: ä¸­ç­‰é£é™©åˆ é™¤ï¼ˆç¬¬2å‘¨ï¼‰

**ç›®æ ‡**: åˆ é™¤æ•°æ®æ¨¡å‹å’Œå·¥å…·ç±»ä¸­çš„æœªä½¿ç”¨æ–¹æ³•

**èŒƒå›´**:
- ThermalCurve: 4ä¸ªå‡½æ•°
- AlgorithmResult: 9ä¸ªå‡½æ•°
- PeakAreaTool: 3ä¸ªå‡½æ•°
- TrapezoidMeasureTool: 3ä¸ªå‡½æ•°

**é¢„æœŸæ”¶ç›Š**: åˆ é™¤çº¦120è¡Œä»£ç 

**æ‰§è¡Œæ­¥éª¤**:
1. ä»Phase 1åˆ†æ”¯åˆ›å»ºPhase 2åˆ†æ”¯
2. å…ˆåˆ é™¤å·¥å…·ç±»å‡½æ•°ï¼ˆé£é™©æœ€ä½ï¼‰
3. å†åˆ é™¤æ•°æ®æ¨¡å‹å‡½æ•°
4. å…¨é¢å›å½’æµ‹è¯•
5. åˆå¹¶åˆ°Phase 1åˆ†æ”¯

**éªŒè¯æ¸…å•**:
- [ ] ç¼–è¯‘æ— é”™è¯¯
- [ ] æ‰€æœ‰æµ‹é‡å·¥å…·åŠŸèƒ½æ­£å¸¸
- [ ] æ›²çº¿åˆ›å»ºå’Œç®¡ç†æ­£å¸¸
- [ ] ç®—æ³•ç»“æœå¤„ç†æ­£å¸¸

---

### Phase 3: UIå±‚åˆ é™¤ï¼ˆç¬¬3å‘¨ï¼‰

**ç›®æ ‡**: åˆ é™¤å›¾è¡¨å’Œè§†å›¾ç±»ä¸­çš„æœªä½¿ç”¨æ–¹æ³•

**èŒƒå›´**:
- ChartView: 2ä¸ªå‡½æ•°ï¼ˆselectedPointsç›¸å…³ï¼‰
- ThermalChart: 4ä¸ªå‡½æ•°
- CurveViewController: 1ä¸ªå‡½æ•°

**é¢„æœŸæ”¶ç›Š**: åˆ é™¤çº¦80è¡Œä»£ç 

**æ‰§è¡Œæ­¥éª¤**:
1. ä»Phase 2åˆ†æ”¯åˆ›å»ºPhase 3åˆ†æ”¯
2. åˆ é™¤ChartViewå†—ä½™å‡½æ•°
3. åˆ é™¤ThermalChartæœªä½¿ç”¨å‡½æ•°
4. å®Œæ•´UIäº¤äº’æµ‹è¯•
5. åˆå¹¶åˆ°ä¸»å¼€å‘åˆ†æ”¯

**éªŒè¯æ¸…å•**:
- [ ] ç¼–è¯‘æ— é”™è¯¯
- [ ] æ‰€æœ‰å›¾è¡¨äº¤äº’æ­£å¸¸ï¼ˆç¼©æ”¾ã€å¹³ç§»ã€é€‰ç‚¹ï¼‰
- [ ] æ¨ªè½´åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] å¤šYè½´åŠŸèƒ½æ­£å¸¸
- [ ] æµ‹é‡å·¥å…·åŠŸèƒ½æ­£å¸¸

---

### Phase 4: å¾…è¯„ä¼°å‡½æ•°å¤å®¡ï¼ˆåŸºçº¿æ ¡æ­£åŠŸèƒ½å®Œæˆåï¼‰

**ç›®æ ‡**: åœ¨åŸºçº¿æ ¡æ­£å’Œå‚æ•°å¯¹è¯æ¡†åŠŸèƒ½å®Œæˆåï¼Œé‡æ–°è¯„ä¼°å¾…è¯„ä¼°å‡½æ•°

**èŒƒå›´**:
- AlgorithmCoordinator: 1ä¸ªå‡½æ•°
- ChartView: 4ä¸ªå‡½æ•°

**æ‰§è¡Œç­–ç•¥**: å¾…åŠŸèƒ½å®ç°å®Œæˆåå†³å®š

---

## ğŸ”§ åˆ é™¤æ“ä½œæŒ‡å—

### åˆ é™¤å‰æ£€æŸ¥æ¸…å•

åœ¨åˆ é™¤ä»»ä½•å‡½æ•°ä¹‹å‰ï¼Œå¿…é¡»å®Œæˆä»¥ä¸‹æ£€æŸ¥ï¼š

- [ ] **å…¨æ–‡æœç´¢éªŒè¯**: ä½¿ç”¨grepç¡®è®¤å‡½æ•°0æ¬¡è°ƒç”¨
  ```bash
  grep -r "\.functionName(" --include="*.cpp" --include="*.h"
  ```

- [ ] **å¤´æ–‡ä»¶æ£€æŸ¥**: ç¡®è®¤ä¸æ˜¯è™šå‡½æ•°æˆ–æ¥å£æ–¹æ³•çš„å®ç°
  ```bash
  # æ£€æŸ¥æ˜¯å¦æœ‰ virtual å…³é”®å­—
  grep -A 5 "functionName" header_file.h
  ```

- [ ] **Qtå…ƒå¯¹è±¡æ£€æŸ¥**: ç¡®è®¤ä¸æ˜¯Qtå±æ€§æˆ–ä¿¡å·æ§½
  ```bash
  # æ£€æŸ¥æ˜¯å¦æœ‰ Q_PROPERTY, Q_INVOKABLE, signals, slots
  grep -B 3 "functionName" header_file.h
  ```

- [ ] **æ³¨é‡Šæ£€æŸ¥**: æŸ¥çœ‹å‡½æ•°æ³¨é‡Šï¼Œäº†è§£è®¾è®¡æ„å›¾

- [ ] **Gitå†å²æ£€æŸ¥**: æŸ¥çœ‹å‡½æ•°çš„ä¿®æ”¹å†å²
  ```bash
  git log --all --oneline -- "**/filename.cpp" | grep functionName
  ```

---

### åˆ é™¤æ­¥éª¤æ¨¡æ¿

å¯¹äºæ¯ä¸ªè¦åˆ é™¤çš„å‡½æ•°ï¼š

1. **åˆ›å»ºå¤‡ä»½åˆ†æ”¯**
   ```bash
   git checkout -b cleanup/remove-unused-function-MODULE
   ```

2. **åˆ é™¤å£°æ˜**ï¼ˆå¤´æ–‡ä»¶ï¼‰
   - åˆ é™¤å‡½æ•°å£°æ˜è¡Œ
   - åˆ é™¤ç›¸å…³æ³¨é‡Šæ–‡æ¡£

3. **åˆ é™¤å®ç°**ï¼ˆæºæ–‡ä»¶ï¼‰
   - åˆ é™¤å®Œæ•´çš„å‡½æ•°å®ç°
   - åŒ…æ‹¬å¼€å¤´çš„æ³¨é‡Š

4. **ç¼–è¯‘éªŒè¯**
   ```bash
   cd Analysis
   rebuild.bat
   ```

5. **åŠŸèƒ½æµ‹è¯•**
   - å¯åŠ¨åº”ç”¨ç¨‹åº
   - æµ‹è¯•ç›¸å…³åŠŸèƒ½æ¨¡å—
   - ç¡®è®¤æ— è¿è¡Œæ—¶é”™è¯¯

6. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "åˆ é™¤æœªä½¿ç”¨å‡½æ•°: MODULE::functionName

   - ä½ç½®: file.h:è¡Œå·
   - ç†ç”±: [åˆ é™¤ç†ç”±]
   - éªŒè¯: ç¼–è¯‘é€šè¿‡ï¼ŒåŠŸèƒ½æµ‹è¯•æ­£å¸¸
   "
   ```

---

### æ‰¹é‡åˆ é™¤è„šæœ¬ç¤ºä¾‹

```bash
#!/bin/bash
# æ‰¹é‡åˆ é™¤ AlgorithmContext æœªä½¿ç”¨å‡½æ•°

echo "å¼€å§‹åˆ é™¤ AlgorithmContext æœªä½¿ç”¨å‡½æ•°..."

# å¤‡ä»½
git checkout -b cleanup/algorithm-context-unused

# éªŒè¯å½“å‰æ— è°ƒç”¨
echo "éªŒè¯ value() è°ƒç”¨..."
grep -r "\.value(" --include="*.cpp" --include="*.h" | grep -v "algorithm_context"

echo "éªŒè¯ values() è°ƒç”¨..."
grep -r "\.values(" --include="*.cpp" --include="*.h" | grep -v "algorithm_context"

echo "éªŒè¯ clear() è°ƒç”¨..."
grep -r "\.clear()" --include="*.cpp" --include="*.h" | grep -v "algorithm_context"

# ç­‰å¾…ç”¨æˆ·ç¡®è®¤
read -p "éªŒè¯é€šè¿‡ï¼Œæ˜¯å¦ç»§ç»­åˆ é™¤ï¼Ÿ(y/n) " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]
then
    exit 1
fi

# æ‰§è¡Œåˆ é™¤ï¼ˆæ‰‹åŠ¨æ“ä½œï¼Œè„šæœ¬ä»…æç¤ºï¼‰
echo "è¯·æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹åˆ é™¤æ“ä½œï¼š"
echo "1. ç¼–è¾‘ algorithm_context.h: åˆ é™¤ç¬¬313, 358, 372è¡Œ"
echo "2. ç¼–è¾‘ algorithm_context.cpp: åˆ é™¤ç¬¬12-15, 42-52, 69-78è¡Œ"
echo "3. ç¼–è¯‘éªŒè¯: rebuild.bat"
echo "4. æäº¤: git add . && git commit -m 'åˆ é™¤AlgorithmContextæœªä½¿ç”¨å‡½æ•°'"
```

---

## ğŸ“ˆ é¢„æœŸæ”¶ç›Šåˆ†æ

### ä»£ç è§„æ¨¡ä¼˜åŒ–

| æŒ‡æ ‡ | åˆ é™¤å‰ | åˆ é™¤å | å˜åŒ– |
|------|--------|--------|------|
| æ€»ä»£ç è¡Œæ•° | ~11,286è¡Œ | ~10,966è¡Œ | -2.8% |
| æœªä½¿ç”¨å‡½æ•° | 42ä¸ª | 15ä¸ª | -64% |
| æŠ€æœ¯å€ºåŠ¡ | é«˜ | ä½ | æ˜¾è‘—é™ä½ |

### ç»´æŠ¤æˆæœ¬é™ä½

- **å‡å°‘APIå¤æ‚åº¦**: åˆ é™¤27ä¸ªæœªä½¿ç”¨çš„å…¬å…±æ–¹æ³•
- **æé«˜ä»£ç ç†è§£æ€§**: æ¶ˆé™¤å†—ä½™å’Œè¿‡æ—¶çš„æ¥å£
- **é™ä½é‡æ„é£é™©**: å‡å°‘éœ€è¦ç»´æŠ¤çš„æ¥å£æ•°é‡

### ç¼–è¯‘å’Œæµ‹è¯•ä¼˜åŒ–

- **ç¼–è¯‘æ—¶é—´**: é¢„è®¡å‡å°‘çº¦1-2%ï¼ˆåˆ é™¤æ¨¡æ¿å®ä¾‹åŒ–å’Œå†…è”å±•å¼€ï¼‰
- **æµ‹è¯•è¦†ç›–ç‡**: æå‡æœ‰æ•ˆè¦†ç›–ç‡ï¼ˆå»é™¤æ­»ä»£ç ï¼‰

---

## âš ï¸ é£é™©è¯„ä¼°ä¸ç¼“è§£æªæ–½

### é£é™©çŸ©é˜µ

| é£é™©ç±»å‹ | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|---------|------|------|----------|
| ç¼–è¯‘å¤±è´¥ | ä½ | ä¸­ | åˆ†é˜¶æ®µåˆ é™¤ï¼Œæ¯æ¬¡ç¼–è¯‘éªŒè¯ |
| è¿è¡Œæ—¶é”™è¯¯ | æä½ | é«˜ | å…¨é¢åŠŸèƒ½æµ‹è¯•ï¼Œå›å½’æµ‹è¯• |
| éšè—ä¾èµ– | ä½ | ä¸­ | å…¨æ–‡æœç´¢éªŒè¯ï¼ŒGitå†å²æ£€æŸ¥ |
| æœªæ¥åŠŸèƒ½éœ€æ±‚ | ä¸­ | ä½ | ä¿ç•™å®Œæ•´çš„Gitå†å²ï¼Œå¯éšæ—¶æ¢å¤ |

### ç¼“è§£æªæ–½æ¸…å•

1. **ç‰ˆæœ¬æ§åˆ¶ä¿æŠ¤**
   - æ‰€æœ‰åˆ é™¤æ“ä½œåœ¨ç‹¬ç«‹åˆ†æ”¯è¿›è¡Œ
   - æ¯ä¸ªé˜¶æ®µå•ç‹¬æäº¤
   - ä¿ç•™å®Œæ•´çš„Gitå†å²

2. **éªŒè¯æœºåˆ¶**
   - ç¼–è¯‘éªŒè¯ï¼ˆæ¯æ¬¡åˆ é™¤åï¼‰
   - åŠŸèƒ½æµ‹è¯•ï¼ˆæ¯ä¸ªæ¨¡å—åï¼‰
   - å›å½’æµ‹è¯•ï¼ˆæ¯ä¸ªé˜¶æ®µåï¼‰

3. **å›é€€æœºåˆ¶**
   ```bash
   # å¦‚æœå‘ç°é—®é¢˜ï¼Œå¯ç«‹å³å›é€€
   git checkout main
   git branch -D cleanup/xxx
   ```

4. **æ–‡æ¡£è®°å½•**
   - è®°å½•æ¯ä¸ªåˆ é™¤å†³ç­–
   - ä¿ç•™å‡½æ•°çš„åŸå§‹è®¾è®¡æ„å›¾
   - æ–‡æ¡£åŒ–åˆ é™¤ç†ç”±

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### è¯¦ç»†åˆ†ææŠ¥å‘Š

1. **AlgorithmContext/Manager/Coordinator åˆ†æ** - ç”± Task Agent ç”Ÿæˆ
2. **HistoryManager/AlgorithmResult åˆ†æ** - ç”± Task Agent ç”Ÿæˆ
3. **ThermalCurve/BaselineCorrection åˆ†æ** - ç”± Task Agent ç”Ÿæˆ
4. **ChartView äº¤äº’å·¥å…·åˆ†æ** - ç”± Task Agent ç”Ÿæˆ
5. **ThermalChart/Controller åˆ†æ** - ç”± Task Agent ç”Ÿæˆ
6. **PeakAreaTool/TrapezoidMeasureTool åˆ†æ** - ç”± Task Agent ç”Ÿæˆ

### é¡¹ç›®æ–‡æ¡£

- `CLAUDE.md` - é¡¹ç›®æ¶æ„å’Œè®¾è®¡åŸåˆ™
- `ARCHITECTURE_OPTIMIZATION_PLAN.md` - æ¶æ„ä¼˜åŒ–è·¯çº¿å›¾
- `æœªä½¿ç”¨å‡½æ•°æ•´ç†.md` - åŸå§‹æœªä½¿ç”¨å‡½æ•°åˆ—è¡¨

---

## âœ… æ‰§è¡Œæ£€æŸ¥æ¸…å•

### Phase 1 æ‰§è¡Œå‰

- [ ] åˆ›å»ºå¤‡ä»½åˆ†æ”¯: `git checkout -b cleanup/phase1-low-risk`
- [ ] ç¡®è®¤æ‰€æœ‰åˆ†ææŠ¥å‘Šå·²å®¡æŸ¥
- [ ] å‡†å¤‡å›å½’æµ‹è¯•ç¯å¢ƒ
- [ ] é€šçŸ¥å›¢é˜Ÿæˆå‘˜ï¼ˆå¦‚æœ‰ï¼‰

### Phase 1 æ‰§è¡Œä¸­

- [ ] åˆ é™¤ AlgorithmContext 3ä¸ªå‡½æ•°
  - [ ] ç¼–è¯‘éªŒè¯
  - [ ] åŠŸèƒ½æµ‹è¯•
- [ ] åˆ é™¤ AlgorithmManager::executeWithContext
  - [ ] ç¼–è¯‘éªŒè¯
  - [ ] ç®—æ³•æ‰§è¡Œæµ‹è¯•
- [ ] åˆ é™¤ HistoryManager undoCount/redoCount
  - [ ] ç¼–è¯‘éªŒè¯
  - [ ] æ’¤é”€/é‡åšåŠŸèƒ½æµ‹è¯•
- [ ] åˆ é™¤ BaselineCorrectionAlgorithm::findNearestPoint
  - [ ] ç¼–è¯‘éªŒè¯
  - [ ] åŸºçº¿æ ¡æ­£ç®—æ³•æµ‹è¯•

### Phase 1 æ‰§è¡Œå

- [ ] å®Œæ•´å›å½’æµ‹è¯•
- [ ] ä»£ç å®¡æŸ¥
- [ ] æäº¤å¹¶æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯
- [ ] åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼ˆæˆ–ç­‰å¾…åç»­é˜¶æ®µï¼‰

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚åœ¨æ‰§è¡Œåˆ é™¤è®¡åˆ’è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **ç¼–è¯‘å¤±è´¥**: æ£€æŸ¥æ˜¯å¦æœ‰éšè—ä¾èµ–ï¼Œä½¿ç”¨Gitå›é€€
2. **æµ‹è¯•å¤±è´¥**: åˆ†æå¤±è´¥åŸå› ï¼Œå¯èƒ½éœ€è¦ä¿ç•™è¯¥å‡½æ•°
3. **è®¾è®¡ç–‘é—®**: å‚è€ƒCLAUDE.mdä¸­çš„æ¶æ„è®¾è®¡åŸåˆ™

---

## ğŸ“ æ›´æ–°è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2025-11-17 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæˆå…¨ä»£ç åº“åˆ†æ | Claude Code |

---

**æ–‡æ¡£ç»“æŸ**
