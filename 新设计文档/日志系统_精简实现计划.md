# æ—¥å¿—ç³»ç»Ÿ - ç²¾ç®€å®ç°è®¡åˆ’

## è®¾è®¡åŸåˆ™ ğŸ¯

1. **ç®€å•å®ç”¨**ï¼šæ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œé¿å…è¿‡åº¦è®¾è®¡
2. **æ˜“äºæ‰©å±•**ï¼šè‰¯å¥½çš„æ¥å£è®¾è®¡ï¼Œä¾¿äºæœªæ¥æ·»åŠ åŠŸèƒ½
3. **æ¸è¿›å¼å®ç°**ï¼šå…ˆåŸºç¡€åŠŸèƒ½ï¼Œåç»­æŒ‰éœ€æ‰©å±•
4. **é›¶å­¦ä¹ æˆæœ¬**ï¼šAPI ç®€å•ç›´è§‚ï¼Œç±»ä¼¼ç°æœ‰çš„ qDebug()

---

## æ ¸å¿ƒéœ€æ±‚ï¼ˆMVPï¼‰

### âœ… å¿…é¡»å®ç°
- [x] ç»Ÿä¸€çš„æ—¥å¿—æ¥å£ï¼ˆæ›¿ä»£ qDebug/qWarning/qCriticalï¼‰
- [x] æ—¥å¿—çº§åˆ«æ§åˆ¶ï¼ˆDebug/Info/Warning/Error/Criticalï¼‰
- [x] è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶
- [x] åŸºæœ¬æ ¼å¼åŒ–ï¼ˆæ—¶é—´æˆ³ + çº§åˆ« + æ¶ˆæ¯ï¼‰
- [x] æ€§èƒ½è®¡æ—¶å™¨ï¼ˆç®€å•çš„ RAII è®¡æ—¶ï¼‰
- [x] çº¿ç¨‹å®‰å…¨

### âŒ æš‚ä¸å®ç°ï¼ˆä¿ç•™æ‰©å±•æ¥å£ï¼‰
- [ ] æ—¥å¿—æŸ¥çœ‹å™¨ UIï¼ˆæœªæ¥ Phase 2ï¼‰
- [ ] æ—¥å¿—åˆ†æå·¥å…·ï¼ˆæœªæ¥ Phase 3ï¼‰
- [ ] å¼‚æ­¥å†™å…¥ï¼ˆåˆæœŸåŒæ­¥å†™å…¥ï¼Œæ€§èƒ½è¶³å¤Ÿï¼‰
- [ ] å¤æ‚çš„é…ç½®æ–‡ä»¶ï¼ˆåˆæœŸç¡¬ç¼–ç é…ç½®ï¼‰
- [ ] æ—¥å¿—åˆ†ç±»ï¼ˆCategoryï¼‰ï¼ˆæœªæ¥å¯æ‰©å±•ï¼‰

---

## æ¶æ„è®¾è®¡ï¼ˆç®€åŒ–ç‰ˆï¼‰

### æ ¸å¿ƒç»„ä»¶

```
LogManager (å•ä¾‹)
â”œâ”€â”€ LogLevel (æšä¸¾: Debug/Info/Warning/Error/Critical)
â”œâ”€â”€ ILogAppender (æ¥å£) â† æ‰©å±•ç‚¹
â”‚   â”œâ”€â”€ ConsoleAppender
â”‚   â””â”€â”€ FileAppender
â”œâ”€â”€ ILogFormatter (æ¥å£) â† æ‰©å±•ç‚¹
â”‚   â””â”€â”€ DefaultFormatter
â””â”€â”€ PerformanceTimer (RAIIè®¡æ—¶å™¨)
```

### æ‰©å±•ç‚¹è®¾è®¡

```cpp
// æ‰©å±•ç‚¹1: è¾“å‡ºç›®æ ‡æŠ½è±¡æ¥å£
class ILogAppender {
public:
    virtual ~ILogAppender() = default;
    virtual void append(const LogMessage& msg) = 0;
};

// æœªæ¥å¯æ‰©å±•: NetworkAppender, DatabaseAppender, UIAppender ç­‰

// æ‰©å±•ç‚¹2: æ ¼å¼åŒ–å™¨æŠ½è±¡æ¥å£
class ILogFormatter {
public:
    virtual ~ILogFormatter() = default;
    virtual QString format(const LogMessage& msg) = 0;
};

// æœªæ¥å¯æ‰©å±•: JSONFormatter, XMLFormatter ç­‰
```

---

## Phase 1: è°ƒç ”ç°çŠ¶å’Œè®¾è®¡ç®€åŒ–æ¶æ„ (0.5å¤©)

### 1.1 ç»Ÿè®¡ç°æœ‰æ—¥å¿—ä½¿ç”¨æƒ…å†µ
```bash
# ç»Ÿè®¡ qDebug/qWarning/qCritical æ•°é‡
grep -rn "qDebug\|qWarning\|qCritical" Analysis/src/ --include="*.cpp" | wc -l

# åˆ†æä¸»è¦ä½¿ç”¨åœºæ™¯
grep -rn "qDebug" Analysis/src/ --include="*.cpp" | head -20
```

### 1.2 ç¡®å®šæœ€å°æ—¥å¿—æ ¼å¼
**ç®€åŒ–æ ¼å¼**ï¼ˆä¸å«æ–‡ä»¶å/è¡Œå·ï¼Œå‡å°‘è¾“å‡ºå†—ä½™ï¼‰ï¼š
```
[2025-11-11 14:35:22] [ERROR] å¾®åˆ†ç®—æ³•æ‰§è¡Œå¤±è´¥: çª—å£å¤§å°ä¸èƒ½ä¸ºè´Ÿæ•°
[æ—¶é—´æˆ³]                [çº§åˆ«]   [æ¶ˆæ¯]
```

**æ€§èƒ½æ—¥å¿—æ ¼å¼**ï¼š
```
[PERF] DifferentiationAlgorithm took 125ms
```

### 1.3 è®¾è®¡ç›®å½•ç»“æ„
```
Analysis/src/infrastructure/logging/
â”œâ”€â”€ log_manager.h/cpp          // æ—¥å¿—ç®¡ç†å™¨ï¼ˆ200è¡Œå·¦å³ï¼‰
â”œâ”€â”€ log_level.h                // æ—¥å¿—çº§åˆ«æšä¸¾ï¼ˆ30è¡Œï¼‰
â”œâ”€â”€ log_message.h              // æ—¥å¿—æ¶ˆæ¯ç»“æ„ä½“ï¼ˆ50è¡Œï¼‰
â”œâ”€â”€ i_log_appender.h           // è¾“å‡ºæ¥å£ï¼ˆæŠ½è±¡ç±»ï¼Œ20è¡Œï¼‰
â”œâ”€â”€ console_appender.h/cpp     // æ§åˆ¶å°è¾“å‡ºï¼ˆ50è¡Œï¼‰
â”œâ”€â”€ file_appender.h/cpp        // æ–‡ä»¶è¾“å‡ºï¼ˆ100è¡Œï¼‰
â”œâ”€â”€ i_log_formatter.h          // æ ¼å¼åŒ–æ¥å£ï¼ˆ20è¡Œï¼‰
â”œâ”€â”€ default_formatter.h/cpp    // é»˜è®¤æ ¼å¼åŒ–å™¨ï¼ˆ80è¡Œï¼‰
â”œâ”€â”€ performance_timer.h/cpp    // æ€§èƒ½è®¡æ—¶å™¨ï¼ˆ100è¡Œï¼‰
â””â”€â”€ log_macros.h               // ä¾¿æ·å®ï¼ˆ40è¡Œï¼‰
```

**æ€»ä»£ç é‡é¢„ä¼°**ï¼š~700è¡Œï¼ˆéå¸¸è½»é‡ï¼‰

---

## Phase 2: å®ç°æ ¸å¿ƒæ—¥å¿—ç³»ç»Ÿ (2-3å¤©)

### 2.1 å®ç°æ—¥å¿—çº§åˆ«æšä¸¾
**æ–‡ä»¶**: `log_level.h`
```cpp
enum class LogLevel {
    Debug = 0,      // è°ƒè¯•ä¿¡æ¯ï¼ˆRelease ä¸‹å¯å®Œå…¨ç§»é™¤ï¼‰
    Info,           // ä¸€èˆ¬ä¿¡æ¯
    Warning,        // è­¦å‘Š
    Error,          // é”™è¯¯
    Critical        // ä¸¥é‡é”™è¯¯ï¼ˆå¯èƒ½å¯¼è‡´å´©æºƒï¼‰
};

QString logLevelToString(LogLevel level);
QColor logLevelToColor(LogLevel level);  // UI æ˜¾ç¤ºç”¨ï¼ˆæœªæ¥æ‰©å±•ï¼‰
```

### 2.2 å®ç°æ—¥å¿—æ¶ˆæ¯ç»“æ„
**æ–‡ä»¶**: `log_message.h`
```cpp
struct LogMessage {
    QDateTime timestamp;
    LogLevel level;
    QString message;

    // å¯é€‰å­—æ®µï¼ˆæœªæ¥æ‰©å±•ç”¨ï¼‰
    QString category;     // é¢„ç•™ï¼šUI/Algorithm/IO ç­‰
    QString file;         // é¢„ç•™ï¼šæ–‡ä»¶å
    int line = -1;        // é¢„ç•™ï¼šè¡Œå·
    QString function;     // é¢„ç•™ï¼šå‡½æ•°å
};
```

### 2.3 å®ç°è¾“å‡ºæ¥å£å’ŒåŸºç¡€å®ç°
**æ–‡ä»¶**: `i_log_appender.h`
```cpp
class ILogAppender {
public:
    virtual ~ILogAppender() = default;
    virtual void append(const LogMessage& msg) = 0;
    virtual void setMinLevel(LogLevel level) { m_minLevel = level; }

protected:
    LogLevel m_minLevel = LogLevel::Debug;
};
```

**æ–‡ä»¶**: `console_appender.cpp`
```cpp
class ConsoleAppender : public ILogAppender {
public:
    void append(const LogMessage& msg) override {
        if (msg.level < m_minLevel) return;

        QString formatted = m_formatter->format(msg);

        // æ ¹æ®çº§åˆ«é€‰æ‹© qDebug/qWarning/qCritical
        switch (msg.level) {
            case LogLevel::Debug:
            case LogLevel::Info:
                qDebug().noquote() << formatted;
                break;
            case LogLevel::Warning:
                qWarning().noquote() << formatted;
                break;
            case LogLevel::Error:
            case LogLevel::Critical:
                qCritical().noquote() << formatted;
                break;
        }
    }

private:
    std::unique_ptr<ILogFormatter> m_formatter;
};
```

**æ–‡ä»¶**: `file_appender.cpp`
```cpp
class FileAppender : public ILogAppender {
public:
    explicit FileAppender(const QString& filePath);

    void append(const LogMessage& msg) override {
        if (msg.level < m_minLevel) return;

        QString formatted = m_formatter->format(msg);

        QMutexLocker locker(&m_mutex);  // çº¿ç¨‹å®‰å…¨
        if (!m_file.isOpen()) return;

        QTextStream stream(&m_file);
        stream << formatted << "\n";
        stream.flush();  // ç«‹å³å†™å…¥ï¼ˆç®€å•å®ç°ï¼Œä¸ç¼“å†²ï¼‰
    }

private:
    QFile m_file;
    QMutex m_mutex;
    std::unique_ptr<ILogFormatter> m_formatter;
};
```

### 2.4 å®ç°é»˜è®¤æ ¼å¼åŒ–å™¨
**æ–‡ä»¶**: `default_formatter.cpp`
```cpp
class DefaultFormatter : public ILogFormatter {
public:
    QString format(const LogMessage& msg) override {
        QString levelStr = logLevelToString(msg.level).toUpper();
        QString timeStr = msg.timestamp.toString("yyyy-MM-dd hh:mm:ss");

        // ç®€åŒ–æ ¼å¼: [æ—¶é—´] [çº§åˆ«] æ¶ˆæ¯
        return QString("[%1] [%2] %3")
            .arg(timeStr)
            .arg(levelStr, -8)  // å·¦å¯¹é½ï¼Œå®½åº¦8
            .arg(msg.message);
    }
};
```

### 2.5 å®ç°æ—¥å¿—ç®¡ç†å™¨ï¼ˆæ ¸å¿ƒï¼‰
**æ–‡ä»¶**: `log_manager.cpp`
```cpp
class LogManager {
public:
    static LogManager& instance() {
        static LogManager instance;
        return instance;
    }

    void log(LogLevel level, const QString& message) {
        LogMessage msg;
        msg.timestamp = QDateTime::currentDateTime();
        msg.level = level;
        msg.message = message;

        QMutexLocker locker(&m_mutex);  // çº¿ç¨‹å®‰å…¨
        for (auto& appender : m_appenders) {
            appender->append(msg);
        }
    }

    void addAppender(std::unique_ptr<ILogAppender> appender) {
        QMutexLocker locker(&m_mutex);
        m_appenders.push_back(std::move(appender));
    }

    void setGlobalMinLevel(LogLevel level) {
        for (auto& appender : m_appenders) {
            appender->setMinLevel(level);
        }
    }

private:
    LogManager() = default;
    QMutex m_mutex;
    QVector<std::unique_ptr<ILogAppender>> m_appenders;
};
```

### 2.6 åˆ›å»ºä¾¿æ·å®
**æ–‡ä»¶**: `log_macros.h`
```cpp
#include "log_manager.h"

// åŸºç¡€æ—¥å¿—å®
#define LOG_DEBUG(msg)    LogManager::instance().log(LogLevel::Debug, msg)
#define LOG_INFO(msg)     LogManager::instance().log(LogLevel::Info, msg)
#define LOG_WARNING(msg)  LogManager::instance().log(LogLevel::Warning, msg)
#define LOG_ERROR(msg)    LogManager::instance().log(LogLevel::Error, msg)
#define LOG_CRITICAL(msg) LogManager::instance().log(LogLevel::Critical, msg)

// Release æ¨¡å¼ä¸‹å®Œå…¨ç§»é™¤ Debug æ—¥å¿—ï¼ˆé›¶å¼€é”€ï¼‰
#ifdef QT_NO_DEBUG_OUTPUT
  #undef LOG_DEBUG
  #define LOG_DEBUG(msg) ((void)0)
#endif

// ä¾¿æ·çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–å®
#define LOG_DEBUG_F(fmt, ...)    LOG_DEBUG(QString::asprintf(fmt, __VA_ARGS__))
#define LOG_INFO_F(fmt, ...)     LOG_INFO(QString::asprintf(fmt, __VA_ARGS__))
#define LOG_WARNING_F(fmt, ...)  LOG_WARNING(QString::asprintf(fmt, __VA_ARGS__))
#define LOG_ERROR_F(fmt, ...)    LOG_ERROR(QString::asprintf(fmt, __VA_ARGS__))
```

### 2.7 å®ç°æ€§èƒ½è®¡æ—¶å™¨
**æ–‡ä»¶**: `performance_timer.cpp`
```cpp
class PerformanceTimer {
public:
    explicit PerformanceTimer(const QString& operationName)
        : m_operationName(operationName)
    {
        m_timer.start();
    }

    ~PerformanceTimer() {
        qint64 elapsed = m_timer.elapsed();
        LOG_INFO(QString("[PERF] %1 took %2ms")
                 .arg(m_operationName)
                 .arg(elapsed));
    }

private:
    QString m_operationName;
    QElapsedTimer m_timer;
};

// ä¾¿æ·å®
#define PERF_TIMER(name) PerformanceTimer _perf_timer_##__LINE__(name)
```

### 2.8 åˆå§‹åŒ–é…ç½®ï¼ˆåœ¨ main.cpp ä¸­ï¼‰
```cpp
int main(int argc, char* argv[]) {
    QApplication app(argc, argv);

    // ========== åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ ==========
    auto& logMgr = LogManager::instance();

    // æ·»åŠ æ§åˆ¶å°è¾“å‡º
    logMgr.addAppender(std::make_unique<ConsoleAppender>());

    // æ·»åŠ æ–‡ä»¶è¾“å‡ºï¼ˆå¯é€‰ï¼‰
    QString logDir = QStandardPaths::writableLocation(QStandardPaths::AppDataLocation) + "/logs";
    QDir().mkpath(logDir);
    QString logPath = logDir + "/analysis.log";
    logMgr.addAppender(std::make_unique<FileAppender>(logPath));

    // è®¾ç½®æ—¥å¿—çº§åˆ«ï¼ˆRelease æ¨¡å¼ä¸‹åªè®°å½• Info åŠä»¥ä¸Šï¼‰
#ifdef QT_NO_DEBUG_OUTPUT
    logMgr.setGlobalMinLevel(LogLevel::Info);
#else
    logMgr.setGlobalMinLevel(LogLevel::Debug);
#endif

    LOG_INFO("========== Application Started ==========");
    LOG_INFO(QString("Version: %1").arg(APP_VERSION));
    LOG_INFO(QString("Log file: %1").arg(logPath));

    // ... åŸæœ‰åˆå§‹åŒ–ä»£ç  ...
}
```

---

## Phase 3: æ¸è¿›å¼è¿ç§»ç°æœ‰ä»£ç  (1-2å¤©)

### 3.1 è¿ç§»ç­–ç•¥
**åŸåˆ™**ï¼š
- âœ… æ–°ä»£ç å¿…é¡»ä½¿ç”¨æ–°æ—¥å¿—ç³»ç»Ÿ
- âœ… ä¿®æ”¹æ—§ä»£ç æ—¶é¡ºä¾¿è¿ç§»
- âŒ ä¸å¼ºåˆ¶ä¸€æ¬¡æ€§å…¨éƒ¨è¿ç§»ï¼ˆé¿å…å¼•å…¥é£é™©ï¼‰

### 3.2 è¿ç§»ç¤ºä¾‹

#### ç¤ºä¾‹1: ç®€å•è¿ç§»
```cpp
// æ—§ä»£ç 
qDebug() << "æ›²çº¿å·²æ·»åŠ åˆ°ç®¡ç†å™¨ã€‚ID:" << curve.id();

// æ–°ä»£ç 
LOG_INFO(QString("æ›²çº¿å·²æ·»åŠ åˆ°ç®¡ç†å™¨ã€‚ID: %1").arg(curve.id()));
```

#### ç¤ºä¾‹2: é”™è¯¯æ—¥å¿—
```cpp
// æ—§ä»£ç 
qWarning() << "å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶è·¯å¾„ä¸ºç©ºã€‚";

// æ–°ä»£ç 
LOG_WARNING("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶è·¯å¾„ä¸ºç©º");
```

#### ç¤ºä¾‹3: æ€§èƒ½æ—¥å¿—
```cpp
// æ—§ä»£ç 
void DifferentiationAlgorithm::executeWithContext(AlgorithmContext* ctx) {
    // ... ç®—æ³•æ‰§è¡Œ ...
}

// æ–°ä»£ç 
void DifferentiationAlgorithm::executeWithContext(AlgorithmContext* ctx) {
    PERF_TIMER("DifferentiationAlgorithm::execute");

    // ... ç®—æ³•æ‰§è¡Œ ...
}
```

### 3.3 å…³é”®æ¨¡å—ä¼˜å…ˆè¿ç§»
**ä¼˜å…ˆçº§åˆ—è¡¨**ï¼š
1. âœ… P0: ç®—æ³•æ‰§è¡Œæµç¨‹ï¼ˆAlgorithmManager, AlgorithmCoordinatorï¼‰
2. âœ… P0: æ›²çº¿ç®¡ç†ï¼ˆCurveManagerï¼‰
3. âœ… P0: æ–‡ä»¶å¯¼å…¥ï¼ˆDataImportWidget, TextFileReaderï¼‰
4. âœ… P1: UI æ§åˆ¶å™¨ï¼ˆMainController, CurveViewControllerï¼‰
5. âœ… P2: å…¶ä»–æ¨¡å—

### 3.4 ä¿ç•™å‘åå…¼å®¹
```cpp
// å¯ä»¥å®šä¹‰å…¼å®¹å®ï¼Œæš‚æ—¶ä¿ç•™æ—§ä»£ç èƒ½ç¼–è¯‘
#define qDebug() LOG_DEBUG
#define qWarning() LOG_WARNING
#define qCritical() LOG_CRITICAL

// æœªæ¥é€æ­¥ç§»é™¤è¿™äº›å…¼å®¹å®
```

---

## æ‰©å±•è·¯çº¿å›¾ï¼ˆæœªæ¥ç‰ˆæœ¬ï¼‰

### Phase 4: UI æ—¥å¿—æŸ¥çœ‹å™¨ï¼ˆå¯é€‰ï¼‰
**é¢„ç•™æ‰©å±•ç‚¹**ï¼š
- LogManager å·²æ”¯æŒ `addAppender()`
- å®ç° `UILogAppender` ç»§æ‰¿ `ILogAppender`
- å‘å°„ä¿¡å·åˆ° `LogViewerWidget` æ˜¾ç¤º

```cpp
class UILogAppender : public ILogAppender, public QObject {
    Q_OBJECT
public:
    void append(const LogMessage& msg) override {
        emit logMessageReceived(msg);  // å‘å°„ä¿¡å·
    }

signals:
    void logMessageReceived(const LogMessage& msg);
};
```

### Phase 5: æ—¥å¿—åˆ†ç±»ï¼ˆCategoryï¼‰
**é¢„ç•™å­—æ®µ**ï¼š
- `LogMessage` ç»“æ„ä½“å·²æœ‰ `category` å­—æ®µ
- åªéœ€æ·»åŠ  `LogCategory` æšä¸¾å’Œå®å³å¯

```cpp
enum class LogCategory {
    UI, Algorithm, IO, Performance, System
};

#define LOG_INFO_CAT(category, msg) \
    LogManager::instance().log(LogLevel::Info, msg, category)
```

### Phase 6: é«˜çº§åŠŸèƒ½
- [ ] å¼‚æ­¥å†™å…¥ï¼ˆQThread + é˜Ÿåˆ—ï¼‰
- [ ] æ–‡ä»¶æ»šåŠ¨ï¼ˆæŒ‰å¤§å°/æ—¶é—´ï¼‰
- [ ] é…ç½®æ–‡ä»¶ï¼ˆJSON/INIï¼‰
- [ ] æ—¥å¿—åˆ†æå·¥å…·ï¼ˆPython è„šæœ¬ï¼‰

---

## ä¼˜åŠ¿å’Œç‰¹ç‚¹

### âœ… ç®€å•å®ç”¨
- **700è¡Œä»£ç **å®ç°å®Œæ•´æ—¥å¿—ç³»ç»Ÿ
- **3ä¸ªå®**è¦†ç›– 90% ä½¿ç”¨åœºæ™¯
- **é›¶å­¦ä¹ æˆæœ¬**ï¼Œç±»ä¼¼ qDebug()

### âœ… æ˜“äºæ‰©å±•
- **æ¥å£é©±åŠ¨è®¾è®¡**ï¼ˆILogAppender, ILogFormatterï¼‰
- **æ’ä»¶åŒ–æ¶æ„**ï¼ˆé€šè¿‡ addAppender æ·»åŠ æ–°åŠŸèƒ½ï¼‰
- **é¢„ç•™æ‰©å±•å­—æ®µ**ï¼ˆcategory, file, lineï¼‰

### âœ… ç”Ÿäº§å°±ç»ª
- **çº¿ç¨‹å®‰å…¨**ï¼ˆQMutex ä¿æŠ¤ï¼‰
- **Release ä¼˜åŒ–**ï¼ˆDebug æ—¥å¿—é›¶å¼€é”€ï¼‰
- **æ–‡ä»¶æŒä¹…åŒ–**ï¼ˆä¾¿äºé—®é¢˜è¯Šæ–­ï¼‰

### âœ… æ€§èƒ½å‹å¥½
- **åŒæ­¥å†™å…¥**ï¼ˆåˆæœŸç®€å•å®ç°ï¼Œæ€§èƒ½è¶³å¤Ÿï¼‰
- **RAII è®¡æ—¶å™¨**ï¼ˆè‡ªåŠ¨è®°å½•æ€§èƒ½ï¼‰
- **å®å±•å¼€ä¼˜åŒ–**ï¼ˆRelease æ¨¡å¼ä¸‹å®Œå…¨ç§»é™¤ï¼‰

---

## å¼€å‘æ’æœŸï¼ˆç²¾ç®€ç‰ˆï¼‰

| Phase | å†…å®¹ | é¢„è®¡æ—¶é—´ |
|-------|------|---------|
| Phase 1 | è°ƒç ”ç°çŠ¶ + æ¶æ„è®¾è®¡ | 0.5å¤© |
| Phase 2 | æ ¸å¿ƒç³»ç»Ÿå®ç° | 2-3å¤© |
| Phase 3 | æ¸è¿›å¼è¿ç§» | 1-2å¤© |
| **æ€»è®¡** | | **3.5-5.5å¤©** |

---

## ä½¿ç”¨ç¤ºä¾‹ï¼ˆæœ€ç»ˆæ•ˆæœï¼‰

### åŸºç¡€æ—¥å¿—
```cpp
// main_controller.cpp
void MainController::onImportTriggered() {
    LOG_INFO("æ”¶åˆ°å¯¼å…¥è¯·æ±‚");

    QString filePath = config.value("filePath").toString();
    if (filePath.isEmpty()) {
        LOG_WARNING("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶è·¯å¾„ä¸ºç©º");
        return;
    }

    LOG_INFO(QString("æ­£åœ¨å¯¼å…¥æ–‡ä»¶: %1").arg(filePath));
    // ...
}
```

### æ€§èƒ½æ—¥å¿—
```cpp
// differentiation_algorithm.cpp
QVariant DifferentiationAlgorithm::executeWithContext(AlgorithmContext* ctx) {
    PERF_TIMER("DifferentiationAlgorithm::execute");

    // ... ç®—æ³•æ‰§è¡Œ ...

    LOG_DEBUG(QString("å¾®åˆ†è®¡ç®—å®Œæˆï¼Œè¾“å‡ºç‚¹æ•°: %1").arg(outputData.size()));
    return QVariant::fromValue(outputData);
}
```

### è¾“å‡ºæ•ˆæœ
```
[2025-11-11 14:35:22] [INFO    ] ========== Application Started ==========
[2025-11-11 14:35:22] [INFO    ] Version: 0.1.0-alpha
[2025-11-11 14:35:22] [INFO    ] Log file: C:/Users/xxx/AppData/Local/Analysis/logs/analysis.log
[2025-11-11 14:35:30] [INFO    ] æ”¶åˆ°å¯¼å…¥è¯·æ±‚
[2025-11-11 14:35:30] [INFO    ] æ­£åœ¨å¯¼å…¥æ–‡ä»¶: D:/data/sample.txt
[2025-11-11 14:35:31] [INFO    ] æ›²çº¿å·²æ·»åŠ åˆ°ç®¡ç†å™¨ã€‚ID: curve_001
[2025-11-11 14:35:35] [INFO    ] [PERF] DifferentiationAlgorithm::execute took 125ms
[2025-11-11 14:35:35] [DEBUG   ] å¾®åˆ†è®¡ç®—å®Œæˆï¼Œè¾“å‡ºç‚¹æ•°: 995
```

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **è·å¾—æ‰¹å‡†**ï¼šä¸å›¢é˜Ÿç¡®è®¤æ­¤ç²¾ç®€æ–¹æ¡ˆ
2. **åˆ›å»ºåˆ†æ”¯**ï¼š`claude/logging-system-mvp`
3. **Phase 1 è°ƒç ”**ï¼šç»Ÿè®¡ç°æœ‰æ—¥å¿—æ•°é‡å’Œåˆ†å¸ƒ
4. **Phase 2 å®ç°**ï¼šæŒ‰ç…§æœ¬è®¡åˆ’å®ç°æ ¸å¿ƒç³»ç»Ÿï¼ˆ2-3å¤©ï¼‰
5. **Phase 3 è¿ç§»**ï¼šé€æ­¥è¿ç§»å…³é”®æ¨¡å—ï¼ˆ1-2å¤©ï¼‰
6. **æµ‹è¯•éªŒè¯**ï¼šç¡®ä¿æ–°æ—¥å¿—ç³»ç»Ÿç¨³å®šå¯é 
7. **åˆå¹¶ä¸»åˆ†æ”¯**ï¼šå®Œæˆååˆå¹¶å¹¶å‘å¸ƒ

---

## å¤‡æ³¨

- âœ… æœ¬æ–¹æ¡ˆéµå¾ª **KISS åŸåˆ™**ï¼ˆKeep It Simple, Stupidï¼‰
- âœ… é‡‡ç”¨ **YAGNI åŸåˆ™**ï¼ˆYou Aren't Gonna Need Itï¼‰ï¼Œåªå®ç°å¿…éœ€åŠŸèƒ½
- âœ… è‰¯å¥½çš„ **æ‰©å±•æ€§è®¾è®¡**ï¼Œä¾¿äºæœªæ¥æ·»åŠ é«˜çº§åŠŸèƒ½
- âœ… **æ¸è¿›å¼æ¼”è¿›**ï¼Œé™ä½é£é™©ï¼Œå¿«é€Ÿäº¤ä»˜ä»·å€¼
