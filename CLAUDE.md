# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Qt 5.14.2 å¼€å‘çš„çƒ­åˆ†ææ•°æ®å¤„ç†å·¥å…·,æ”¯æŒ TGA(çƒ­é‡åˆ†æ)ã€DSC(å·®ç¤ºæ‰«æé‡çƒ­)ã€ARC(åŠ é€Ÿé‡çƒ­ä»ª)ç­‰çƒ­åˆ†ææ•°æ®çš„å¯¼å…¥ã€å¯è§†åŒ–å’Œåˆ†æå¤„ç†ã€‚

**é¡¹ç›®è§„æ¨¡** (æˆªè‡³ 2025-11-13):
- ğŸ“¦ **77 ä¸ªæºæ–‡ä»¶** (.cpp + .h)
- ğŸ“ **çº¦ 11,286 è¡Œ C++ ä»£ç ** (.cpp æ–‡ä»¶)
- ğŸ”¬ **5 ç§ç®—æ³•å®ç°** (å¾®åˆ†ã€ç§¯åˆ†ã€ç§»åŠ¨å¹³å‡ã€åŸºçº¿æ ¡æ­£ã€å³°é¢ç§¯)
- ğŸ—ï¸ **å››å±‚æ¶æ„è®¾è®¡** (è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ã€é¢†åŸŸå±‚ã€åŸºç¡€è®¾æ–½å±‚)

## æ„å»ºå’Œå¼€å‘å‘½ä»¤

### ç¼–è¯‘é¡¹ç›®

åœ¨ Windows ä¸Šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬:
```bash
# é¦–æ¬¡ç¼–è¯‘ Debug ç‰ˆæœ¬
cd Analysis
build.bat

# é‡æ–°ç¼–è¯‘(å¿«é€Ÿ)
rebuild.bat

# ç¼–è¯‘ Release ç‰ˆæœ¬
build-release.bat

# æ¸…ç†ç¼–è¯‘äº§ç‰©
clean.bat
```

æ‰‹åŠ¨ç¼–è¯‘:
```bash
cd Analysis
mkdir build-debug
cd build-debug
qmake ../Analysis.pro
mingw32-make
```

### è¿è¡Œç¨‹åº
```bash
cd Analysis/build-debug/release
Analysis.exe
```

### å¼€å‘ç¯å¢ƒè¦æ±‚
- Qt 5.14.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- MinGW 7.3.0 ç¼–è¯‘å™¨
- C++17 æ ‡å‡†
- Qt Charts æ¨¡å—

### âš ï¸ äº‘ç«¯ç¯å¢ƒé™åˆ¶

**é‡è¦è¯´æ˜**ï¼šæœ¬é¡¹ç›®æ˜¯åŸºäº Qt 5.14.2 å’Œ MinGW çš„ Windows æ¡Œé¢åº”ç”¨ï¼Œ**æ— æ³•åœ¨äº‘ç«¯ Linux ç¯å¢ƒä¸­ç¼–è¯‘**ã€‚

- **Claude Code äº‘ç«¯ç¯å¢ƒ**ï¼šè¿è¡Œåœ¨ Linux ç³»ç»Ÿä¸Šï¼Œç¼ºå°‘ Qt å¼€å‘ç¯å¢ƒå’Œ MinGW ç¼–è¯‘å™¨
- **ç¼–è¯‘è¦æ±‚**ï¼šå¿…é¡»åœ¨é…ç½®å¥½ Qt 5.14.2 + MinGW 7.3.0 çš„ Windows ç¯å¢ƒä¸­ç¼–è¯‘
- **Claude çš„ä½œç”¨**ï¼š
  - âœ… å¯ä»¥ç¼–å†™å’Œä¿®æ”¹ä»£ç ï¼ˆ.cpp/.h æ–‡ä»¶ï¼‰
  - âœ… å¯ä»¥æäº¤ä»£ç åˆ° Git åˆ†æ”¯
  - âœ… å¯ä»¥è¿›è¡Œä»£ç å®¡æŸ¥å’Œæ¶æ„è®¾è®¡
  - âŒ **æ— æ³•ç¼–è¯‘é¡¹ç›®**ï¼ˆéœ€è¦ç”¨æˆ·åœ¨æœ¬åœ° Windows ç¯å¢ƒç¼–è¯‘ï¼‰
  - âŒ æ— æ³•è¿è¡Œå’Œæµ‹è¯•ç¨‹åº

**å·¥ä½œæµç¨‹**ï¼š
1. Claude åœ¨äº‘ç«¯ç¼–å†™/ä¿®æ”¹ä»£ç 
2. Claude æäº¤ä»£ç åˆ° Git åˆ†æ”¯
3. **ç”¨æˆ·åœ¨æœ¬åœ° Windows ç¯å¢ƒæ‹‰å–ä»£ç **
4. **ç”¨æˆ·åœ¨æœ¬åœ°ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•**
5. ç”¨æˆ·åé¦ˆæµ‹è¯•ç»“æœç»™ Claude
6. Claude æ ¹æ®åé¦ˆç»§ç»­ä¼˜åŒ–

## æ¶æ„è®¾è®¡

é¡¹ç›®é‡‡ç”¨æ¸…æ™°çš„**å››å±‚åˆ†å±‚æ¶æ„**,éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)åŸåˆ™:

### 1. è¡¨ç¤ºå±‚ (Presentation Layer) - `src/ui/`
- **MainWindow**: ä¸»çª—å£,ç®¡ç†æ•´ä½“å¸ƒå±€(èœå•ã€å·¥å…·æ ã€åœé é¢æ¿),æ¥æ”¶é¢„æ„é€ çš„ ChartView ä¸ ProjectExplorerView,ä»…è´Ÿè´£å¸ƒå±€ä¸ä¿¡å·è½¬å‘
- **ChartView**: ğŸ†• åŸºäº Qt Charts çš„å›¾è¡¨ç»„ä»¶,æ”¯æŒå¤šæ›²çº¿æ˜¾ç¤ºã€ç¼©æ”¾ã€äº¤äº’é€‰æ‹©
  - **æ´»åŠ¨ç®—æ³•çŠ¶æ€æœº**: ç®¡ç†ç”¨æˆ·ä¸ç®—æ³•çš„äº¤äº’æµç¨‹
    - `InteractionState`: äº¤äº’çŠ¶æ€æšä¸¾ (Idle/WaitingForPoints/PointsCompleted/Executing)
    - `ActiveAlgorithmInfo`: å½“å‰æ´»åŠ¨ç®—æ³•ä¿¡æ¯ (åç§°/æ˜¾ç¤ºå/æ‰€éœ€ç‚¹æ•°/æç¤º)
    - `startAlgorithmInteraction()`: å¯åŠ¨ç®—æ³•äº¤äº’,è¿›å…¥ç­‰å¾…é€‰ç‚¹çŠ¶æ€
    - `cancelAlgorithmInteraction()`: å–æ¶ˆå½“å‰äº¤äº’,å›åˆ°ç©ºé—²çŠ¶æ€
    - `algorithmInteractionCompleted(algorithmName, points)`: å½“ç”¨æˆ·å®Œæˆé€‰ç‚¹åè‡ªåŠ¨å‘å‡º,è§¦å‘ç®—æ³•æ‰§è¡Œ
  - **äº¤äº’æ¨¡å¼**: InteractionMode (View/Pick)
  - **æ¨ªè½´æ¨¡å¼**: XAxisMode (Temperature/Time)
  - **äº¤äº’åŠŸèƒ½**:
    - å·¦é”®æ¡†é€‰ç¼©æ”¾ï¼ˆViewæ¨¡å¼ä¸‹æ‹–åŠ¨é€‰æ‹©åŒºåŸŸï¼‰
    - å³é”®æ‹–åŠ¨å¹³ç§»
    - Ctrl+æ»šè½®ç¼©æ”¾
    - å¤šYè½´æ”¯æŒ
- **FloatingLabel**: ğŸ†• æµ®åŠ¨æ ‡ç­¾ç»„ä»¶,å¯æ‹–åŠ¨ã€å¯ç¼©æ”¾çš„æ–‡æœ¬æ ‡ç­¾
  - **é”šå®šæ¨¡å¼**: DataAnchored (è·Ÿéšæ•°æ®) / ViewAnchored (å›ºå®šHUD)
  - **äº¤äº’åŠŸèƒ½**: æ‹–åŠ¨ç§»åŠ¨ã€Ctrl+æ»šè½®ç¼©æ”¾ã€å…³é—­æŒ‰é’®ã€é”å®š/è§£é”
  - **åº”ç”¨åœºæ™¯**: å³°é¢ç§¯æ•°å€¼æ˜¾ç¤ºã€æµ‹é‡ç»“æœã€æ³¨é‡Šæ ‡ç­¾
- **TrapezoidMeasureTool**: ğŸ†• ç›´è§’æ¢¯å½¢æµ‹é‡å·¥å…·
  - **åŠŸèƒ½**: æµ‹é‡æ›²çº¿ä¸Šä¸¤ç‚¹ä¹‹é—´çš„å‚ç›´é«˜åº¦å·®ï¼ˆè´¨é‡æŸå¤±ï¼‰
  - **ç‰¹æ€§**: å¯æ‹–åŠ¨ç«¯ç‚¹ã€è‡ªåŠ¨å¸é™„æ›²çº¿ã€å®æ—¶æ˜¾ç¤ºæµ‹é‡å€¼
  - **æ”¯æŒ**: æ¨ªè½´åˆ‡æ¢åŒæ­¥ï¼ˆæ¸©åº¦/æ—¶é—´æ¨¡å¼ï¼‰
- **ProjectExplorerView**: é¡¹ç›®æµè§ˆå™¨è§†å›¾,æ ‘å½¢ç»“æ„å±•ç¤ºæ›²çº¿åŠå…¶è¡ç”Ÿå…³ç³»(æ¨¡å‹ç”± ProjectTreeManager æä¾›)
- **DataImportWidget**: æ•°æ®å¯¼å…¥å¯¹è¯æ¡†,æ™ºèƒ½åˆ—è¯†åˆ«å’Œé¢„è§ˆ

**æ§åˆ¶å™¨ (Controller)** - `src/ui/controller/`
- **MainController**: ä¸»æ§åˆ¶å™¨(MVCä¸­çš„C),åè°ƒUIå’Œä¸šåŠ¡é€»è¾‘,å¤„ç†åº”ç”¨çº§äº‹ä»¶
- **CurveViewController**: è´Ÿè´£åè°ƒ CurveManagerã€ProjectTreeManagerã€ChartViewã€ProjectExplorerView çš„çŠ¶æ€åŒæ­¥

**é‡è¦**: UI å±‚ç»„ä»¶åªå‘å°„ä¿¡å·,ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ã€‚æ‰€æœ‰ä¸šåŠ¡å¤„ç†ç”± Controller åè°ƒã€‚

### 2. åº”ç”¨å±‚ (Application Layer) - `src/application/`
åè°ƒä¸šåŠ¡æµç¨‹,è¿æ¥UIå’Œé¢†åŸŸé€»è¾‘:

**ç»Ÿä¸€åˆå§‹åŒ–** - `src/application/`
- **ApplicationContext**: åº”ç”¨ä¸Šä¸‹æ–‡,è´Ÿè´£ç»Ÿä¸€åˆå§‹åŒ–å’Œç®¡ç†æ‰€æœ‰ MVC å®ä¾‹çš„æ„é€ é¡ºåº,ç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®

**æ›²çº¿ç®¡ç†** - `src/application/curve/`
- **CurveManager**: æ›²çº¿ç”Ÿå‘½å‘¨æœŸç®¡ç†,æä¾›å¢åˆ æ”¹æŸ¥,ç®¡ç†æ´»åŠ¨æ›²çº¿,å‘å°„æ•°æ®å˜åŒ–ä¿¡å·

**ç®—æ³•æœåŠ¡** - `src/application/algorithm/`
- **AlgorithmManager**: ç®—æ³•ç®¡ç†å™¨,ç®¡ç†ç®—æ³•æ³¨å†Œè¡¨,æ‰§è¡Œç®—æ³•å¹¶åˆ›å»ºæ–°æ›²çº¿,è‡ªåŠ¨è®¾ç½®çˆ¶å­å…³ç³»
- **AlgorithmCoordinator**: ğŸ†•ğŸ§ª ç®—æ³•æ‰§è¡Œæµç¨‹åè°ƒå™¨,è´Ÿè´£è°ƒåº¦ç®—æ³•æ‰§è¡Œæµç¨‹(å‚æ•°æ”¶é›†ã€ç‚¹é€‰è¯·æ±‚ã€ç®—æ³•æ‰§è¡Œã€ç»“æœé€šçŸ¥)
  - âš ï¸ **å®éªŒæ€§ç»„ä»¶**: ä¸»è¦ç”¨äºæœªæ¥çš„äº¤äº’å¼ç®—æ³•ï¼ˆåŸºçº¿ç»˜åˆ¶ã€å³°é¢ç§¯è®¡ç®—ç­‰ï¼‰
  - å½“å‰ç®€å•ç®—æ³•ï¼ˆå¾®åˆ†ã€ç§¯åˆ†ã€ç§»åŠ¨å¹³å‡ï¼‰é€šè¿‡æ­¤ç»„ä»¶ç»Ÿä¸€è°ƒåº¦
  - æä¾›æ‰©å±•æ€§ï¼šæ”¯æŒå‚æ•°å¯¹è¯æ¡†ã€ç‚¹é€‰äº¤äº’ã€å¤šæ­¥éª¤æµç¨‹
- **AlgorithmContext**: ğŸ†•ğŸ§ª ç®—æ³•è¿è¡Œæ—¶ä¸Šä¸‹æ–‡å®¹å™¨,ç»Ÿä¸€ç®¡ç†ç®—æ³•æ‰§è¡Œæ‰€éœ€çš„æ•°æ®(å‚æ•°ã€ç‚¹é€‰ç»“æœã€æ›²çº¿å¼•ç”¨ç­‰),æä¾›æ—¶é—´æˆ³å’Œæ•°æ®æ¥æºè¿½è¸ª
- **AlgorithmDescriptor**: ğŸ†•ğŸ§ª ç®—æ³•å‚æ•°å®šä¹‰å’Œå…ƒæ•°æ®æè¿°

**é¡¹ç›®ç®¡ç†** - `src/application/project/`
- **ProjectTreeManager**: é¡¹ç›®æ ‘ç®¡ç†å™¨,ç®¡ç†æ ‘å½¢è§†å›¾ç»“æ„,ç»´æŠ¤æ›²çº¿çš„çˆ¶å­å…³ç³»å±‚çº§

**å†å²ç®¡ç†** - `src/application/history/`
- **HistoryManager**: å†å²ç®¡ç†å™¨,å®ç°æ’¤é”€/é‡åšåŠŸèƒ½(å‘½ä»¤æ¨¡å¼)
- **ICommand**: å‘½ä»¤æ¥å£,å®šä¹‰ `execute()`, `undo()`, `redo()`
- **AlgorithmCommand**: ç®—æ³•æ‰§è¡Œå‘½ä»¤
- **BaselineCommand**: åŸºçº¿æ ¡æ­£å‘½ä»¤
- **AddCurveCommand**: ğŸ†• æ·»åŠ æ›²çº¿å‘½ä»¤

**å…³é”®è®¾è®¡**: ä½¿ç”¨ä¿¡å·æ§½æœºåˆ¶å®ç°æ¾è€¦åˆ,Manager é€šè¿‡ä¿¡å·é€šçŸ¥çŠ¶æ€å˜åŒ–ã€‚

### 3. é¢†åŸŸå±‚ (Domain Layer) - `src/domain/`
å®šä¹‰æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡å’Œè§„åˆ™,ä¸ä¾èµ–ä»»ä½•å…¶ä»–å±‚:

#### æ•°æ®æ¨¡å‹ - `src/domain/model/`
- **ThermalDataPoint**: æ•°æ®ç‚¹ç»“æ„(æ¸©åº¦ã€æ—¶é—´ã€æµ‹é‡å€¼ã€å…ƒæ•°æ®)
- **ThermalCurve**: æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡,ç»´æŠ¤åŸå§‹æ•°æ®å’Œå¤„ç†æ•°æ®çš„åŒä»½æ•°æ®
  - `rawData`: åŠ è½½åä¸å¯å˜(æ”¯æŒæ’¤é”€æ¢å¤)
  - `processedData`: å¯ä¿®æ”¹(ç”¨äºæ˜¾ç¤ºå’Œè®¡ç®—)
  - **åŒæšä¸¾è®¾è®¡**:
    - `InstrumentType`: ä»ªå™¨ç±»å‹(TGA/DSC/ARC)
    - `SignalType`: ä¿¡å·ç±»å‹(Raw/Derivative/Baseline/PeakArea)
  - **æ˜¾ç¤ºæ ·å¼**:
    - `PlotStyle`: å›¾è¡¨æ ·å¼(Line/Scatter/Area)
  - **æ›²çº¿å±æ€§**: ğŸ†•
    - `isAuxiliaryCurve`: æ˜¯å¦ä¸ºè¾…åŠ©æ›²çº¿ï¼ˆå†³å®šYè½´ç»§æ‰¿ç­–ç•¥ï¼‰
    - `isStronglyBound`: æ˜¯å¦å¼ºç»‘å®šï¼ˆå†³å®šæ ‘ä¸­æ˜¾ç¤ºç­–ç•¥ï¼‰
    - `isMainCurve`: æ˜¯å¦ä¸ºä¸»æ›²çº¿ï¼ˆæ•°æ®æºï¼Œä¸å¯åˆ é™¤ï¼‰
  - åŠ¨æ€å•ä½æ¨æ–­: `getYAxisLabel()` æ ¹æ®ç±»å‹è‡ªåŠ¨ç”ŸæˆYè½´æ ‡ç­¾

#### ç®—æ³•æ¥å£ - `src/domain/algorithm/`
- **IThermalAlgorithm**: ç®—æ³•æ¥å£,å®šä¹‰æ ¸å¿ƒæ–¹æ³•
  - `executeWithContext(AlgorithmContext*)`: ä¸Šä¸‹æ–‡é©±åŠ¨æ‰§è¡Œï¼ˆçº¯è™šå‡½æ•°ï¼‰
  - `prepareContext(AlgorithmContext*)`: æ•°æ®å®Œæ•´æ€§éªŒè¯ï¼ˆä¸¤é˜¶æ®µæ‰§è¡Œ-é˜¶æ®µ1ï¼‰
  - `name()`, `displayName()`, `category()`: åŸºæœ¬ä¿¡æ¯
  - `getOutputSignalType(SignalType)`: ä¿¡å·ç±»å‹è½¬æ¢è§„åˆ™
  - `inputType()`: ğŸ†• è¾“å…¥ç±»å‹ï¼ˆNone/PointSelection/DualCurve/Intersect/MultiPointï¼‰
  - `outputType()`: ğŸ†• è¾“å‡ºç±»å‹ï¼ˆCurve/Marker/Region/ScalarValue/Compositeï¼‰
  - `isAuxiliaryCurve()`: ğŸ†• å£°æ˜æ˜¯å¦ä¸ºè¾…åŠ©æ›²çº¿
  - `isStronglyBound()`: ğŸ†• å£°æ˜æ˜¯å¦å¼ºç»‘å®š
- **AlgorithmDescriptor**: ç®—æ³•æè¿°ç¬¦,å®šä¹‰ç®—æ³•çš„å‚æ•°å…ƒæ•°æ®å’Œäº¤äº’é…ç½®
- **AlgorithmResult**: ğŸ†• ç»Ÿä¸€è¾“å‡ºå®¹å™¨,ç»“æ„åŒ–å°è£…ç®—æ³•æ‰§è¡Œç»“æœ
  - `ResultType`: ç»“æœç±»å‹æšä¸¾ï¼ˆCurve/Marker/Region/ScalarValue/Compositeï¼‰
  - æ”¯æŒå¤šç§è¾“å‡ºï¼šæ›²çº¿ã€æ ‡æ³¨ç‚¹ã€åŒºåŸŸã€æ•°å€¼ã€æ··åˆ
  - å†…ç½®æˆåŠŸ/å¤±è´¥çŠ¶æ€å’Œé”™è¯¯å¤„ç†
  - å…ƒæ•°æ®å­˜å‚¨ï¼ˆarea, peakHeight, unitç­‰ï¼‰
- **ICommand**: å‘½ä»¤æ¨¡å¼æ¥å£,å®šä¹‰ `execute()`, `undo()`, `redo()`

### 4. åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer) - `src/infrastructure/`
æä¾›æŠ€æœ¯æ”¯æŒ,ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘:

#### æ–‡ä»¶IO - `src/infrastructure/io/`
- **IFileReader**: æ–‡ä»¶è¯»å–æ¥å£
- **TextFileReader**: æ–‡æœ¬æ–‡ä»¶è¯»å–å™¨(æ”¯æŒ .txt, .csv)

#### ç®—æ³•å®ç° - `src/infrastructure/algorithm/`
- **DifferentiationAlgorithm**: å¾®åˆ†ç®—æ³•(å¤§çª—å£å¹³æ»‘ä¸­å¿ƒå·®åˆ†æ³•)
- **IntegrationAlgorithm**: ç§¯åˆ†ç®—æ³•(æ¢¯å½¢æ³•åˆ™)
- **MovingAverageFilterAlgorithm**: ç§»åŠ¨å¹³å‡æ»¤æ³¢ç®—æ³•
- **BaselineCorrectionAlgorithm**: åŸºçº¿æ ¡æ­£ç®—æ³•
- **PeakAreaAlgorithm**: ğŸ†• å³°é¢ç§¯è®¡ç®—ç®—æ³•(æ¢¯å½¢ç§¯åˆ†æ³•)
  - **ç±»å‹**: Bç±»ç®—æ³•ï¼ˆäº¤äº’å¼ï¼Œéœ€è¦ç”¨æˆ·é€‰ç‚¹ï¼‰
  - **è¾“å…¥**: ç”¨æˆ·é€‰æ‹©2ä¸ªç‚¹å®šä¹‰ç§¯åˆ†èŒƒå›´
  - **è¾“å‡º**: Composite (æ•°å€¼ + FloatingLabel)
  - **åº”ç”¨**: TGAè´¨é‡æŸå¤±ã€DSCç„“å˜è®¡ç®—

## æ ¸å¿ƒè®¾è®¡æ¨¡å¼å’ŒåŸåˆ™

### 1. åŒæšä¸¾åˆ†ç¦»è®¾è®¡
ä¼ ç»Ÿçƒ­åˆ†æè½¯ä»¶å¸¸ç”¨å•ä¸€æšä¸¾(TGA/DSC/DTG),å¯¼è‡´è¯­ä¹‰æ··ä¹±ã€‚æœ¬é¡¹ç›®åˆ†ç¦»ä¸º:
```cpp
enum class InstrumentType { TGA, DSC, ARC };              // ä»ªå™¨ç±»å‹
enum class SignalType { Raw, Derivative, Baseline, PeakArea }; // ä¿¡å·å¤„ç†çŠ¶æ€
enum class PlotStyle { Line, Scatter, Both };             // å›¾è¡¨æ˜¾ç¤ºæ ·å¼
```

**ä¼˜åŠ¿**:
- è¯­ä¹‰æ¸…æ™°,æ¦‚å¿µä¸æ··æ·†
- æ˜“äºæ‰©å±•æ–°ä»ªå™¨ç±»å‹æˆ–å¤„ç†æ–¹æ³•
- ç®—æ³•é€šç”¨åŒ–,æ— éœ€é’ˆå¯¹ç‰¹å®šä»ªå™¨ç¼–å†™ç‰¹æ®Šé€»è¾‘
- æ”¯æŒå¤šç§ä¿¡å·ç±»å‹(åŸå§‹ã€å¾®åˆ†ã€åŸºçº¿æ ¡æ­£ã€å³°é¢ç§¯)

### 2. æ•°æ®ä¸å¯å˜æ€§
æ›²çº¿ç»´æŠ¤åŸå§‹æ•°æ®å’Œå¤„ç†æ•°æ®ä¸¤ä»½:
- `rawData`: åªè¯»,ä¸å¯å˜,æ”¯æŒæ’¤é”€æ¢å¤
- `processedData`: å¯ä¿®æ”¹,ç”¨äºæ˜¾ç¤ºå’Œè®¡ç®—

### 3. çˆ¶å­å…³ç³»è¿½è¸ª
ç®—æ³•ç”Ÿæˆçš„æ›²çº¿è‡ªåŠ¨å…³è”åˆ°çˆ¶æ›²çº¿:
```cpp
newCurve.setParentId(parentCurve->id());
```
åœ¨ ProjectExplorer ä¸­ä»¥æ ‘å½¢ç»“æ„å±•ç¤ºæ•°æ®è¡€ç¼˜å…³ç³»ã€‚

### 4. å‘½ä»¤æ¨¡å¼å®ç°æ’¤é”€/é‡åš
æ‰€æœ‰ä¿®æ”¹æ•°æ®çš„æ“ä½œå°è£…ä¸º Command:
- HistoryManager ç»´æŠ¤ undoStack å’Œ redoStack
- æ‰§è¡Œæ–°æ“ä½œæ—¶æ¸…ç©º redoStack
- é™åˆ¶å†å²æ ˆæ·±åº¦é˜²æ­¢å†…å­˜æº¢å‡º

### 5. ä¿¡å·æ§½é€šä¿¡æœºåˆ¶
- UI â†’ Controller: ç”¨æˆ·æ“ä½œä¿¡å·
- Manager â†’ Controller: çŠ¶æ€å˜åŒ–é€šçŸ¥
- Controller â†’ UI: æ›´æ–°ç•Œé¢

### 6. ç®—æ³•é€šç”¨åŒ–è®¾è®¡
æ‰€æœ‰ç®—æ³•é€‚ç”¨äºæ‰€æœ‰ä»ªå™¨ç±»å‹:
```cpp
// å¾®åˆ†ç®—æ³•
SignalType getOutputSignalType(SignalType input) {
    return (input == Raw) ? Derivative : input;
}
// å¯¹ TGA/DSC/ARC å‡é€‚ç”¨,æ— éœ€ç‰¹æ®Šå¤„ç†
```

### 7. AlgorithmContext ä¸Šä¸‹æ–‡æ¨¡å¼ ğŸ†•
ç»Ÿä¸€çš„ç®—æ³•è¿è¡Œæ—¶æ•°æ®å®¹å™¨,è§£å†³ç®—æ³•æ‰§è¡Œæ—¶çš„æ•°æ®ä¼ é€’å’Œè¿½è¸ªé—®é¢˜:
```cpp
// ä¸Šä¸‹æ–‡å€¼ç»“æ„
struct ContextValue {
    QVariant value;       // å®é™…å€¼
    QDateTime timestamp;  // æ›´æ–°æ—¶é—´æˆ³
    QString source;       // æ•°æ®æ¥æº(UI/Algorithm/File)
};

class AlgorithmContext : public QObject {
    QMap<QString, ContextValue> m_data;  // é”®å€¼å¯¹å­˜å‚¨

    // ç±»å‹å®‰å…¨çš„è®¿é—®
    template<typename T>
    T get(const QString& key, const T& defaultValue = T());

    // è®¾ç½®å€¼å¹¶è®°å½•æ¥æº
    void set(const QString& key, const QVariant& value, const QString& source);

signals:
    void valueChanged(const QString& key);  // å€¼å˜åŒ–ä¿¡å·
};
```

**ä¼˜åŠ¿**:
- ç»Ÿä¸€æ•°æ®ç®¡ç†: æ‰€æœ‰ç®—æ³•å‚æ•°ã€ç‚¹é€‰ç»“æœã€æ›²çº¿å¼•ç”¨ç­‰éƒ½å­˜å‚¨åœ¨ä¸Šä¸‹æ–‡ä¸­
- æ—¶é—´æˆ³è¿½è¸ª: æ¯ä¸ªå€¼éƒ½æœ‰æ›´æ–°æ—¶é—´,ä¾¿äºè°ƒè¯•å’Œå®¡è®¡
- æ¥æºè¿½è¸ª: è®°å½•æ•°æ®æ¥è‡ª UI è¾“å…¥ã€ç®—æ³•è®¡ç®—è¿˜æ˜¯æ–‡ä»¶åŠ è½½
- ä¿¡å·é€šçŸ¥: å€¼å˜åŒ–æ—¶è‡ªåŠ¨å‘å‡ºä¿¡å·,æ”¯æŒå“åº”å¼ç¼–ç¨‹
- ç±»å‹å®‰å…¨: æ¨¡æ¿æ–¹æ³•æä¾›ç±»å‹å®‰å…¨çš„è®¿é—®æ¥å£
- æ‰¹é‡æ“ä½œ: æ”¯æŒ `merge()` åˆå¹¶å¤šä¸ªä¸Šä¸‹æ–‡

**æ•°æ®åˆ†ç±»** (è¯¦è§ `æ–°è®¾è®¡æ–‡æ¡£/AlgorithmContext_æ•°æ®æ¸…å•.md`):
- åŸºç¡€æ›²çº¿æ•°æ®(5é¡¹): æ´»åŠ¨æ›²çº¿ã€è¾“å…¥æ›²çº¿ã€è¾“å‡ºæ›²çº¿ç­‰
- é€šç”¨ç®—æ³•å‚æ•°(10é¡¹): çª—å£å¤§å°ã€é˜ˆå€¼ã€æ­¥é•¿ç­‰
- å³°é¢ç§¯å‚æ•°(8é¡¹): ç§¯åˆ†èŒƒå›´ã€åŸºçº¿ç±»å‹ã€èµ·æ­¢ç‚¹ç­‰
- åŸºçº¿æ ¡æ­£å‚æ•°(6é¡¹): æ ¡æ­£ç±»å‹ã€å¤šé¡¹å¼æ¬¡æ•°ã€é”šç‚¹ç­‰
- 15ä¸ªç±»åˆ«,å…±60+æ•°æ®é¡¹

### 8. AlgorithmResult ç»Ÿä¸€è¾“å‡ºå®¹å™¨ ğŸ†•âœ¨

**è®¾è®¡ç›®æ ‡**: åˆ›å»ºç»Ÿä¸€çš„ç»“æœå®¹å™¨ç±»ï¼Œå°è£…æ‰€æœ‰ç®—æ³•è¾“å‡ºç±»å‹ï¼Œæä¾›ç»“æ„åŒ–ã€ç±»å‹å®‰å…¨çš„ç»“æœè®¿é—®æ¥å£ã€‚

**æ ¸å¿ƒç†å¿µ**:
```
ç®—æ³•è¾“å…¥ï¼šAlgorithmContext (æ‹‰å–æ•°æ®)
           â†“
      ç®—æ³•æ‰§è¡Œé€»è¾‘
           â†“
ç®—æ³•è¾“å‡ºï¼šAlgorithmResult (ç»“æ„åŒ–ç»“æœ)
```

**ç»“æœç±»å‹**:
```cpp
enum class ResultType {
    Curve,          // è¾“å‡ºæ›²çº¿ï¼ˆå¦‚å¾®åˆ†ã€ç§¯åˆ†ã€æ»¤æ³¢åçš„æ›²çº¿ï¼‰
    Marker,         // æ ‡æ³¨ç‚¹ï¼ˆå¦‚å³°å€¼ç‚¹ã€å¤–æ¨ç‚¹ã€æ‹ç‚¹ï¼‰
    Region,         // åŒºåŸŸï¼ˆå¦‚å³°é¢ç§¯ã€ç§¯åˆ†åŒºåŸŸï¼‰
    ScalarValue,    // å•ä¸ªæ•°å€¼ï¼ˆå¦‚å¤–æ¨æ¸©åº¦ã€å³°é«˜ã€æ–œç‡ï¼‰
    Composite       // æ··åˆç»“æœï¼ˆåŒ…å«å¤šç§ç±»å‹ï¼‰
};
```

**å…³é”®ç‰¹æ€§**:
- âœ… **ç»“æ„åŒ–**: æ‰€æœ‰è¾“å‡ºå°è£…åœ¨å•ä¸€å¯¹è±¡ä¸­ï¼Œæ¸…æ™°æ˜ç¡®
- âœ… **ç±»å‹å®‰å…¨**: å¼ºç±»å‹å­—æ®µï¼Œç¼–è¯‘æ—¶æ£€æŸ¥
- âœ… **å¤šè¾“å‡ºæ”¯æŒ**: `Composite` ç±»å‹æ”¯æŒåŒæ—¶è¿”å›å¤šç§ç»“æœ
- âœ… **æ˜“äºè§£æ**: ä¸“é—¨çš„å¤„ç†æ–¹æ³•é’ˆå¯¹ä¸åŒç»“æœç±»å‹
- âœ… **å¯æ‰©å±•**: é€šè¿‡ `meta` å­—æ®µçµæ´»æ‰©å±•
- âœ… **é”™è¯¯å¤„ç†**: å†…ç½®æˆåŠŸ/å¤±è´¥çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯
- âœ… **å¯è¿½æº¯**: åŒ…å«æ—¶é—´æˆ³å’Œæ¥æºä¿¡æ¯

**ä½¿ç”¨ç¤ºä¾‹**:
```cpp
// ç®€å•æ›²çº¿è¾“å‡ºï¼ˆå¾®åˆ†ï¼‰
AlgorithmResult result = AlgorithmResult::success("differentiation", curveId, ResultType::Curve);
result.setCurve(outputCurve);
result.setMeta("unit", "mg/min");
return result;

// æ··åˆè¾“å‡ºï¼ˆå³°é¢ç§¯ï¼‰
AlgorithmResult result = AlgorithmResult::success("peakArea", curveId, ResultType::Composite);
result.addCurve(baselineCurve);        // æ·»åŠ åŸºçº¿æ›²çº¿
result.setArea(area, "J/g");           // è®¾ç½®é¢ç§¯æ•°å€¼
result.addRegion(areaPolygon);         // æ·»åŠ åŒºåŸŸï¼ˆç”¨äºé˜´å½±å¡«å……ï¼‰
result.addMarker(startPoint, "èµ·ç‚¹"); // æ·»åŠ æ ‡æ³¨ç‚¹
return result;
```

è¯¦è§: `æ–°è®¾è®¡æ–‡æ¡£/ç»Ÿä¸€è¾“å‡ºç®—æ³•_AlgorithmResultè®¾è®¡.md`

### 9. çº¯ä¸Šä¸‹æ–‡é©±åŠ¨æ‰§è¡Œæ¨¡å¼ ğŸ†•âœ¨

**æ ¸å¿ƒç†å¿µ**ï¼šç®—æ³•é‡‡ç”¨**æ‹‰å– (Pull)** æ¨¡å¼ä»ä¸Šä¸‹æ–‡è·å–æ•°æ®ï¼Œå½»åº•æ¶ˆé™¤å‚æ•°ä¼ é€’ã€‚

#### è®¾è®¡åŸåˆ™

æœ¬é¡¹ç›®é‡‡ç”¨**çº¯ä¸Šä¸‹æ–‡é©±åŠ¨**è®¾è®¡ï¼Œ**æ— å‘åå…¼å®¹å±‚**ï¼š

âŒ **å·²ç§»é™¤**ï¼š
- `process(QVector<ThermalDataPoint>)` - æ—§çš„æ•°æ®å¤„ç†æ¥å£
- `setParameter(QString, QVariant)` - æ—§çš„å‚æ•°è®¾ç½®æ–¹æ³•
- `execute(QVariantMap)` - æ—§çš„å‚æ•°æ¨é€æ¥å£
- `executeWithInputs(QVariantMap)` - AlgorithmManager æ—§æ–¹æ³•

âœ… **å”¯ä¸€æ¥å£**ï¼š
- `executeWithContext(AlgorithmContext*)` - ç®—æ³•ä»ä¸Šä¸‹æ–‡æ‹‰å–æ•°æ®
- `prepareContext(AlgorithmContext*)` - æ³¨å…¥é»˜è®¤å‚æ•°ï¼ˆå¯é€‰ï¼‰

#### ç®—æ³•å®ç°æ¨¡æ¿

```cpp
class XXXAlgorithm : public IThermalAlgorithm {
public:
    // æ ¸å¿ƒæ¥å£æ–¹æ³•
    QString name() const override;
    QString displayName() const override;
    QString category() const override;
    SignalType getOutputSignalType(SignalType) const override;
    AlgorithmDescriptor descriptor() const override;

    // ä¸Šä¸‹æ–‡é©±åŠ¨æ‰§è¡Œæ¥å£
    void prepareContext(AlgorithmContext* context) override {
        // æ³¨å…¥é»˜è®¤å‚æ•°ï¼ˆå¦‚æœä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨ï¼‰
        if (!context->contains("param.windowSize")) {
            context->setValue("param.windowSize", m_defaultWindowSize);
        }
    }

    QVariant executeWithContext(AlgorithmContext* context) override {
        // 1. éªŒè¯ä¸Šä¸‹æ–‡
        if (!context) return QVariant();

        // 2. æ‹‰å–æ›²çº¿
        auto curve = context->get<ThermalCurve*>("activeCurve");
        if (!curve.has_value() || !curve.value()) return QVariant();

        // 3. æ‹‰å–å‚æ•°ï¼ˆvalue_or æä¾› fallbackï¼‰
        int windowSize = context->get<int>("param.windowSize").value_or(m_defaultWindowSize);

        // 4. è·å–è¾“å…¥æ•°æ®
        const auto& inputData = curve.value()->getProcessedData();

        // 5. æ‰§è¡Œæ ¸å¿ƒç®—æ³•é€»è¾‘
        QVector<ThermalDataPoint> outputData;
        // ... ç®—æ³•å®ç° ...

        // 6. è¿”å›ç»“æœ
        return QVariant::fromValue(outputData);
    }

private:
    int m_defaultWindowSize = 50;  // ä»…ä½œä¸º fallback
};
```

#### å·²è¿ç§»çš„ç®—æ³•ï¼ˆ100%å®Œæˆï¼‰

âœ… **DifferentiationAlgorithm** - å¾®åˆ†ï¼ˆå¤§çª—å£å¹³æ»‘ä¸­å¿ƒå·®åˆ†æ³•ï¼‰
âœ… **IntegrationAlgorithm** - ç§¯åˆ†ï¼ˆæ¢¯å½¢æ³•åˆ™ï¼‰
âœ… **MovingAverageFilterAlgorithm** - ç§»åŠ¨å¹³å‡æ»¤æ³¢
âœ… **BaselineCorrectionAlgorithm** - åŸºçº¿æ ¡æ­£ï¼ˆéœ€è¦ç‚¹é€‰äº¤äº’ï¼‰
âœ… **PeakAreaAlgorithm** - å³°é¢ç§¯è®¡ç®—ï¼ˆæ¢¯å½¢ç§¯åˆ†æ³•ï¼Œéœ€è¦ç‚¹é€‰äº¤äº’ï¼‰

æ‰€æœ‰5ä¸ªç®—æ³•å‡å·²å®Œå…¨è¿ç§»åˆ°çº¯ä¸Šä¸‹æ–‡é©±åŠ¨æ¨¡å¼ï¼Œ**æ— å‘åå…¼å®¹å±‚**ã€‚

#### æ ¸å¿ƒä¼˜åŠ¿

- âœ… **é›¶å‚æ•°ä¼ é€’**: ä¸å†éœ€è¦åœ¨è°ƒç”¨ç‚¹æ„é€  QVariantMap
- âœ… **å•ä¸€æ•°æ®æº**: AlgorithmContext æ˜¯å”¯ä¸€çš„æ•°æ®å®¹å™¨
- âœ… **ç±»å‹å®‰å…¨**: `context->get<T>()` æä¾›ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- âœ… **é»˜è®¤å€¼æ”¯æŒ**: `value_or(default)` ç®€åŒ–å‚æ•°å¤„ç†
- âœ… **è°ƒç”¨é¡ºåºæ— å…³**: æ•°æ®åœ¨ä¸Šä¸‹æ–‡ä¸­å…¨å±€å¯ç”¨
- âœ… **æ˜“äºæ‰©å±•**: æ·»åŠ æ–°å‚æ•°æ— éœ€ä¿®æ”¹å‡½æ•°ç­¾å
- âœ… **æ¶æ„ç»Ÿä¸€**: æ‰€æœ‰ç®—æ³•éµå¾ªç›¸åŒçš„æ‰§è¡Œæ¨¡å¼

#### ä¸¤é˜¶æ®µæ‰§è¡Œæœºåˆ¶ ğŸ”

**é—®é¢˜**ï¼šç®—æ³•è¢«é€‰ä¸­æ—¶ï¼Œå¿…éœ€çš„æ•°æ®ï¼ˆå¦‚å›¾è¡¨ä¸Šçš„é€‰ç‚¹ï¼‰å¯èƒ½ä¸å®Œæ•´ã€‚å¦‚æœç®—æ³•åœ¨æ•°æ®ä¸å®Œæ•´æ—¶æ‰§è¡Œï¼Œä¼šå¯¼è‡´ç»“æœä¸å‡†ç¡®æˆ–èµ„æºæµªè´¹ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šé‡‡ç”¨ä¸¤é˜¶æ®µæ‰§è¡Œç¡®ä¿ç®—æ³•åªåœ¨æ¥æ”¶åˆ°å®Œæ•´æ•°æ®åæ‰å¼€å§‹è®¡ç®—ã€‚

| é˜¶æ®µ | æ–¹æ³• | èŒè´£ | æ•°æ®çŠ¶æ€ | è¿”å›å€¼ |
|------|------|------|----------|--------|
| **é˜¶æ®µ1** | `prepareContext()` | éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œæ³¨å…¥é»˜è®¤å‚æ•° | å¯èƒ½ä¸å®Œæ•´ | `bool` - æ˜¯å¦å°±ç»ª |
| **é˜¶æ®µ2** | `executeWithContext()` | ä½¿ç”¨å®Œæ•´æ•°æ®æ‰§è¡Œè®¡ç®— | å®Œæ•´ä¸”æœ€ç»ˆ | `QVariant` - è®¡ç®—ç»“æœ |

**é˜¶æ®µ1ç¤ºä¾‹ï¼ˆprepareContextï¼‰**ï¼š
```cpp
bool XXXAlgorithm::prepareContext(AlgorithmContext* context) {
    // 1. éªŒè¯ä¸Šä¸‹æ–‡æœ¬èº«
    if (!context) return false;

    // 2. éªŒè¯å¿…éœ€æ•°æ®ï¼ˆactiveCurveï¼‰
    auto curve = context->get<ThermalCurve*>("activeCurve");
    if (!curve.has_value() || !curve.value()) return false;

    // 3. [äº¤äº’ç®—æ³•] éªŒè¯ç”¨æˆ·äº¤äº’æ•°æ®ï¼ˆå¦‚é€‰ç‚¹ï¼‰
    auto points = context->get<QVector<QPointF>>("selectedPoints");
    if (!points.has_value() || points.value().size() < 2) {
        return false;  // æ•°æ®ä¸å®Œæ•´ï¼Œç­‰å¾…ç”¨æˆ·é€‰ç‚¹
    }

    // 4. æ³¨å…¥é»˜è®¤å‚æ•°
    if (!context->contains("param.xxx")) {
        context->setValue("param.xxx", m_default);
    }

    return true;  // æ•°æ®å®Œæ•´ï¼Œå¯ä»¥æ‰§è¡Œ
}
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- âœ… **é˜²æ­¢è¿‡æ—©æ‰§è¡Œ**ï¼šç®—æ³•åªåœ¨æ•°æ®å®Œæ•´æ—¶æ‰æ‰§è¡Œè®¡ç®—
- âœ… **æ˜ç¡®çš„çŠ¶æ€æ£€æŸ¥**ï¼š`prepareContext()` è¿”å›å€¼æ˜ç¡®è¡¨ç¤ºå°±ç»ªçŠ¶æ€
- âœ… **ä¿è¯æ•°æ®ä¸€è‡´æ€§**ï¼šç®—æ³•æ¥æ”¶åˆ°çš„ä¸€å®šæ˜¯ç”¨æˆ·å®Œæ•´äº¤äº’åçš„æ•°æ®
- âœ… **æ˜“äºè°ƒè¯•**ï¼šæ¸…æ™°çš„æ—¥å¿—è¾“å‡ºæŒ‡ç¤ºæ•°æ®ç¼ºå¤±åŸå› 

#### æ‰§è¡Œæµç¨‹

```
AlgorithmCoordinator::executeAlgorithm()
  â†’ æ¸…ç©ºä¸Šä¸‹æ–‡æ—§æ•°æ®
  â†’ context->setValue("activeCurve", curve)
  â†’ context->setValue("param.*", values)
  â†’ context->setValue("selectedPoints", points)  // å¦‚éœ€è¦
  â†“
AlgorithmManager::executeWithContext(name, context)
  â†“
  ã€é˜¶æ®µ1ï¼šæ•°æ®å®Œæ•´æ€§éªŒè¯ã€‘
  â†’ bool isReady = algorithm->prepareContext(context)
  â†’ if (!isReady) {
       qWarning() << "æ•°æ®ä¸å®Œæ•´ï¼Œæ— æ³•æ‰§è¡Œ";
       return;  // æå‰ç»ˆæ­¢ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥
    }
  â†“
  ã€é˜¶æ®µ2ï¼šæ‰§è¡Œè®¡ç®—ã€‘
  â†’ QVariant result = algorithm->executeWithContext(context)
    â†’ auto curve = context->get<ThermalCurve*>("activeCurve")
    â†’ int param = context->get<int>("param.xxx").value_or(default)
    â†’ æ‰§è¡Œæ ¸å¿ƒç®—æ³•é€»è¾‘
    â†’ return QVariant::fromValue(result)
  â†“
  â†’ handleAlgorithmResult(...)  // å¤„ç†ç»“æœ
  â†’ emit algorithmResultReady(...)
```

### 10. ç»Ÿä¸€åˆå§‹åŒ–æ¨¡å¼ ğŸ†•âœ¨ ï¼ˆv2.0 - å®Œå…¨ä¾èµ–æ³¨å…¥ï¼‰

**é‡å¤§æ›´æ–°**ï¼šå·²ç§»é™¤æ‰€æœ‰å•ä¾‹æ¨¡å¼ï¼Œæ”¹ä¸ºå®Œå…¨çš„ä¾èµ–æ³¨å…¥ï¼

ä½¿ç”¨ ApplicationContext ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆå§‹åŒ–é¡ºåºï¼š

```cpp
class ApplicationContext {
    ApplicationContext(QObject* parent) : QObject(parent) {
        // ==================== æ­£ç¡®çš„ä¾èµ–æ³¨å…¥åˆå§‹åŒ–é¡ºåº ====================

        // 1. åŸºç¡€è®¾æ–½å±‚ï¼ˆæ— ä¾èµ–ï¼‰
        m_threadManager = new AlgorithmThreadManager(this);
        m_threadManager->setMaxThreads(1);  // é…ç½®

        m_historyManager = new HistoryManager(this);

        // 2. é¢†åŸŸæ¨¡å‹å±‚
        m_curveManager = new CurveManager(this);

        // 3. åº”ç”¨æœåŠ¡å±‚ï¼ˆä¾èµ–æ³¨å…¥ï¼‰
        m_algorithmManager = new AlgorithmManager(
            m_threadManager,  // âœ… æ˜¾å¼æ³¨å…¥ ThreadManager
            this
        );
        m_algorithmManager->setCurveManager(m_curveManager);
        m_algorithmManager->setHistoryManager(m_historyManager);

        m_algorithmContext = new AlgorithmContext(this);
        m_algorithmCoordinator = new AlgorithmCoordinator(...);
        m_projectTreeManager = new ProjectTreeManager(m_curveManager, this);

        // 4. è¡¨ç¤ºå±‚ï¼ˆUIï¼‰
        m_chartView = new ChartView();
        m_chartView->setCurveManager(m_curveManager);
        m_projectExplorerView = new ProjectExplorerView();
        m_mainWindow = new MainWindow(m_chartView, m_projectExplorerView);
        m_mainWindow->bindHistoryManager(*m_historyManager);  // âœ… ä¼ é€’å®ä¾‹

        // 5. æ§åˆ¶å™¨å±‚
        m_mainController = new MainController(
            m_curveManager,
            m_algorithmManager,  // âœ… ç›´æ¥ä¼ é€’å®ä¾‹
            m_historyManager,    // âœ… ç›´æ¥ä¼ é€’å®ä¾‹
            this
        );
        m_curveViewController = new CurveViewController(...);

        // 6. æ³¨å†Œç®—æ³•ï¼ˆæœ€åï¼‰
        registerAlgorithms();
    }
};
```

**v2.0 é‡å¤§æ”¹è¿›**ï¼š
- âŒ **ç§»é™¤å•ä¾‹æ¨¡å¼**ï¼šAlgorithmManagerã€HistoryManagerã€AlgorithmThreadManager ä¸å†æ˜¯å•ä¾‹
- âœ… **æ„é€ å‡½æ•°æ³¨å…¥**ï¼šæ‰€æœ‰ä¾èµ–é€šè¿‡æ„é€ å‡½æ•°æ˜¾å¼ä¼ é€’ï¼ˆå¦‚ `new AlgorithmManager(threadManager, parent)`ï¼‰
- âœ… **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šApplicationContext ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å®ä¾‹çš„åˆ›å»ºå’Œé”€æ¯
- âœ… **ä¾èµ–å…³ç³»æ˜¾å¼åŒ–**ï¼šåˆå§‹åŒ–é¡ºåºå®Œå…¨å¯æ§ï¼Œæ— éšè—ä¾èµ–
- âœ… **å¯æµ‹è¯•æ€§æå‡**ï¼šæ˜“äºæ³¨å…¥ Mock å¯¹è±¡è¿›è¡Œå•å…ƒæµ‹è¯•

**v1.0 vs v2.0 å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | v1.0ï¼ˆæ—§ï¼‰ | v2.0ï¼ˆæ–°ï¼‰ |
|------|-----------|-----------|
| **AlgorithmManager** | `AlgorithmManager::instance()` âŒ | `new AlgorithmManager(threadManager, parent)` âœ… |
| **ThreadManager** | æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨ `instance()` âŒ | æ„é€ å‡½æ•°å‚æ•°æ³¨å…¥ âœ… |
| **HistoryManager** | `HistoryManager::instance()` âŒ | `new HistoryManager(parent)` âœ… |
| **åˆå§‹åŒ–ä½ç½®** | åˆ†æ•£åœ¨å¤šå¤„ âŒ | ApplicationContext å”¯ä¸€å…¥å£ âœ… |
| **ä¾èµ–å¯è§æ€§** | éšè—ä¾èµ– âŒ | å®Œå…¨æ˜¾å¼ âœ… |
| **æµ‹è¯•å‹å¥½** | éš¾ä»¥ Mock âŒ | æ˜“äºæ³¨å…¥ Mock âœ… |

**ä¼˜åŠ¿**:
- **ä¾èµ–æ³¨å…¥**: æ¸…æ™°çš„ä¾èµ–å…³ç³»ï¼Œé¿å…å¾ªç¯ä¾èµ–
- å¯æµ‹è¯•æ€§: æ˜“äºæ›¿æ¢ä¸º Mock å¯¹è±¡è¿›è¡Œå•å…ƒæµ‹è¯•
- ç”Ÿå‘½å‘¨æœŸç®¡ç†: ç»Ÿä¸€ç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯
- é…ç½®é›†ä¸­: æ‰€æœ‰åˆå§‹åŒ–é€»è¾‘é›†ä¸­åœ¨ä¸€å¤„

## é‡è¦çš„æ•°æ®æµå‘

### å¯¼å…¥æ•°æ®æµ
```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶
  â†’ DataImportWidget (é¢„è§ˆ)
  â†’ TextFileReader (è¯»å–)
  â†’ ThermalCurve (åˆ›å»º)
  â†’ CurveManager (ç®¡ç†)
  â†’ ä¿¡å·: curveAdded
  â†’ â”œâ”€ ProjectTreeManager (æ›´æ–°æ ‘)
    â””â”€ ChartView (æ˜¾ç¤ºå›¾è¡¨)
```

### ç®—æ³•æ‰§è¡Œæµ (ä¸Šä¸‹æ–‡é©±åŠ¨æ¶æ„) ğŸ†•âœ¨
```
ç”¨æˆ·é€‰æ‹©ç®—æ³•
  â†’ MainWindow (èœå•è§¦å‘)
  â†’ MainController (åè°ƒ)
  â†’ AlgorithmCoordinator::handleAlgorithmTriggered (æµç¨‹ç¼–æ’)
  â†’ â”œâ”€ è·å–æ´»åŠ¨æ›²çº¿
    â”œâ”€ è§¦å‘å‚æ•°æ”¶é›†å¯¹è¯æ¡† (å¦‚éœ€è¦)
    â”‚   â†’ ç”¨æˆ·è¾“å…¥å‚æ•° â†’ ä¿å­˜åˆ° m_pending
    â”œâ”€ è¯·æ±‚ç‚¹é€‰ (å¦‚éœ€è¦)
    â”‚   â†’ ç”¨æˆ·åœ¨å›¾è¡¨ä¸Šç‚¹é€‰ â†’ ä¿å­˜åˆ° m_pending
    â””â”€ AlgorithmCoordinator::executeAlgorithm
      â†’ æ¸…ç©ºä¸Šä¸‹æ–‡ä¸­çš„æ—§æ•°æ®
      â†’ è®¾ç½® activeCurve åˆ°ä¸Šä¸‹æ–‡
      â†’ è®¾ç½®å‚æ•°åˆ°ä¸Šä¸‹æ–‡ (param.*)
      â†’ è®¾ç½®é€‰æ‹©çš„ç‚¹åˆ°ä¸Šä¸‹æ–‡ (selectedPoints)
      â†’ AlgorithmManager::executeWithContext(name, context)
        â”œâ”€ éªŒè¯ä¸Šä¸‹æ–‡ä¸­çš„ activeCurve
        â”œâ”€ è°ƒç”¨ algorithm->prepareContext(context) [æ³¨å…¥é»˜è®¤å‚æ•°]
        â””â”€ è°ƒç”¨ algorithm->executeWithContext(context)
          â†’ ç®—æ³•ä»ä¸Šä¸‹æ–‡æ‹‰å– activeCurve
          â†’ ç®—æ³•ä»ä¸Šä¸‹æ–‡æ‹‰å–å‚æ•° (param.*)
          â†’ æ‰§è¡Œæ ¸å¿ƒç®—æ³•é€»è¾‘
          â†’ è¿”å›ç»“æœ
        â†’ handleAlgorithmResult(algorithm, curve, result)
          â†’ æ ¹æ® outputType å¤„ç†ç»“æœ
          â†’ åˆ›å»ºæ–°æ›²çº¿ (OutputType::Curve)
          â†’ è®¾ç½® parentId å’Œ signalType
          â†’ æ·»åŠ åˆ° CurveManager (é€šè¿‡ HistoryManager)
        â†’ å‘å‡º algorithmResultReady ä¿¡å·
  â†’ CurveManager å‘å‡º curveAdded ä¿¡å·
  â†’ â”œâ”€ ProjectTreeManager (æ·»åŠ ä¸ºå­èŠ‚ç‚¹)
    â”œâ”€ ChartView (æ˜¾ç¤ºæ–°æ›²çº¿)
    â””â”€ CurveViewController (åŒæ­¥çŠ¶æ€)
```

**å…³é”®ç‰¹æ€§**:
- âœ… **ä¸Šä¸‹æ–‡é©±åŠ¨**: ç®—æ³•ä» AlgorithmContext æ‹‰å–æ•°æ®ï¼Œé¿å…ç¹ççš„å‚æ•°ä¼ é€’
- âœ… **å•ä¸€æ•°æ®æº**: æ‰€æœ‰è¿è¡Œæ—¶æ•°æ®é›†ä¸­åœ¨ä¸Šä¸‹æ–‡ä¸­ç®¡ç†
- âœ… **æµç¨‹ç¼–æ’**: AlgorithmCoordinator è´Ÿè´£äº¤äº’æµç¨‹å’Œæ•°æ®æ”¶é›†
- âœ… **ç±»å‹å®‰å…¨**: `context->get<T>()` æä¾›ç±»å‹å®‰å…¨çš„è®¿é—®
- âœ… **é»˜è®¤å‚æ•°**: `prepareContext()` æ³¨å…¥ç®—æ³•é»˜è®¤å€¼
- âœ… **å†å²è¿½è¸ª**: æ‰€æœ‰æ•°æ®å˜åŒ–éƒ½æœ‰æ—¶é—´æˆ³å’Œæ¥æºè®°å½•

### ğŸ†• æ´»åŠ¨ç®—æ³•çŠ¶æ€æœº (ChartView äº¤äº’ç®¡ç†) âœ¨

**è®¾è®¡ç†å¿µ**: ChartView ç»´æŠ¤"å½“å‰æ´»åŠ¨ç®—æ³•"çŠ¶æ€ï¼Œè·Ÿè¸ªç”¨æˆ·äº¤äº’è¿›åº¦ï¼Œå½“äº¤äº’å®Œæˆæ—¶è‡ªåŠ¨è§¦å‘ç®—æ³•æ‰§è¡Œã€‚

**çŠ¶æ€æœºæµç¨‹**:
```
ç”¨æˆ·é€‰æ‹©ç®—æ³• (å¦‚"åŸºçº¿æ ¡æ­£")
  â†’ MainController::onAlgorithmRequested()
  â†’ AlgorithmCoordinator::handleAlgorithmTriggered()
  â†’ å‘å‡º requestPointSelection(algorithmName, curveId, requiredPoints, hint)
  â†’ MainController::onCoordinatorRequestPointSelection()
  â†’ ChartView::startAlgorithmInteraction(algorithmName, displayName, requiredPoints, hint)
    â”œâ”€ è®¾ç½® m_activeAlgorithm (è®°å½•å½“å‰ç®—æ³•ä¿¡æ¯)
    â”œâ”€ çŠ¶æ€è½¬æ¢: Idle â†’ WaitingForPoints
    â”œâ”€ å‘å‡º interactionStateChanged(WaitingForPoints)
    â””â”€ åˆ‡æ¢åˆ° Pick æ¨¡å¼ (åå­—å…‰æ ‡)

ç”¨æˆ·åœ¨å›¾è¡¨ä¸Šç‚¹å‡»é€‰ç‚¹
  â†’ ChartView::handlePointSelectionClick()
    â”œâ”€ æ£€æŸ¥ m_activeAlgorithm.isValid() && state == WaitingForPoints
    â”œâ”€ æ·»åŠ ç‚¹åˆ° m_selectedPoints
    â”œâ”€ æ£€æŸ¥æ˜¯å¦æ”¶é›†å¤Ÿæ‰€éœ€ç‚¹æ•° (size >= requiredPointCount)
    â””â”€ å¦‚æœå®Œæˆ:
      â”œâ”€ çŠ¶æ€è½¬æ¢: WaitingForPoints â†’ PointsCompleted
      â”œâ”€ å‘å‡º interactionStateChanged(PointsCompleted)
      â”œâ”€ å‘å‡º algorithmInteractionCompleted(algorithmName, selectedPoints) â­ è‡ªåŠ¨è§¦å‘æ‰§è¡Œ
      â””â”€ åˆ‡æ¢å› View æ¨¡å¼

MainController æ¥æ”¶ä¿¡å·
  â†’ è¿æ¥ ChartView::algorithmInteractionCompleted()
  â†’ è°ƒç”¨ AlgorithmCoordinator::handlePointSelectionResult(points)
  â†’ ç®—æ³•æ‰§è¡Œæµç¨‹ç»§ç»­ (è§ä¸Šæ–¹"ç®—æ³•æ‰§è¡Œæµ")
```

**æ ¸å¿ƒä¼˜åŠ¿**:
- âœ… **çŠ¶æ€è¿½è¸ª**: å§‹ç»ˆçŸ¥é“å“ªä¸ªç®—æ³•æ­£åœ¨ç­‰å¾…äº¤äº’ï¼Œè¿›åº¦å¦‚ä½•
- âœ… **è‡ªåŠ¨æ‰§è¡Œ**: ç”¨æˆ·å®Œæˆé€‰ç‚¹åæ— éœ€æ‰‹åŠ¨ç‚¹å‡»"æ‰§è¡Œ"æŒ‰é’®
- âœ… **æ¸…æ™°åé¦ˆ**: å¯æ˜¾ç¤ºæç¤ºæ–‡æœ¬ "å·²é€‰ 1/2 ç‚¹ï¼Œè¯·ç»§ç»­é€‰æ‹©"
- âœ… **å¯å–æ¶ˆæ€§**: `cancelAlgorithmInteraction()` å¯éšæ—¶ä¸­æ­¢äº¤äº’
- âœ… **æ¾è€¦åˆ**: ChartView åªè´Ÿè´£äº¤äº’ç®¡ç†ï¼Œä¸çŸ¥é“ç®—æ³•å…·ä½“é€»è¾‘

**é›†æˆè¦ç‚¹** (âœ… å·²å®Œæˆ):
1. âœ… MainController è¿æ¥äº† `ChartView::algorithmInteractionCompleted()` ä¿¡å·ï¼ˆåœ¨ `setPlotWidget()` ä¸­ï¼‰
2. âœ… ä¿®æ”¹äº† `onCoordinatorRequestPointSelection()` è°ƒç”¨ `ChartView::startAlgorithmInteraction()`
3. âœ… ä¿¡å·å¤„ç†å™¨è‡ªåŠ¨è°ƒç”¨ `coordinator->handlePointSelectionResult(points)` ç»§ç»­æ‰§è¡Œ
4. âœ… æ·»åŠ äº† `interactionStateChanged` ä¿¡å·ç›‘å¬ï¼ˆç”¨äºè°ƒè¯•å’Œæœªæ¥çš„UIåé¦ˆï¼‰

**ä»£ç ä½ç½®**:
- ä¿¡å·è¿æ¥: `main_controller.cpp:62-95` (setPlotWidget æ–¹æ³•)
- çŠ¶æ€æœºå¯åŠ¨: `main_controller.cpp:266-296` (onCoordinatorRequestPointSelection æ–¹æ³•)
- æ—§è·¯å¾„æ ‡è®°: `main_controller.cpp:257-270` (onPointsPickedFromView ä¿ç•™ç”¨äºå‘åå…¼å®¹)

## ç¼–ç çº¦å®šå’Œæ³¨æ„äº‹é¡¹

### å±‚é—´ä¾èµ–è§„åˆ™
- âœ… ä¸Šå±‚å¯ä»¥ä¾èµ–ä¸‹å±‚
- âŒ ä¸‹å±‚ä¸èƒ½ä¾èµ–ä¸Šå±‚
- âœ… åŒå±‚ä¹‹é—´é€šè¿‡æ¥å£ä¾èµ–

### æ·»åŠ æ–°ç®—æ³•
1. åœ¨ `Analysis/src/infrastructure/algorithm/` å®ç° `IThermalAlgorithm` æ¥å£
2. å®ç° `process()` æ–¹æ³•(æ ¸å¿ƒç®—æ³•é€»è¾‘)
3. å®ç° `getOutputSignalType()` å®šä¹‰ä¿¡å·ç±»å‹è½¬æ¢è§„åˆ™
4. åœ¨ `AlgorithmService` ä¸­æ³¨å†Œç®—æ³•
5. åœ¨ `MainWindow` ä¸­æ·»åŠ èœå•é¡¹å¹¶è¿æ¥ä¿¡å·

### æ·»åŠ æ–°æ–‡ä»¶æ ¼å¼
1. åœ¨ `Analysis/src/infrastructure/io/` å®ç° `IFileReader` æ¥å£
2. å®ç° `canRead()` å’Œ `read()` æ–¹æ³•
3. åœ¨ `CurveManager::registerDefaultReaders()` ä¸­æ³¨å†Œ

### ä¿®æ”¹æ•°æ®æ¨¡å‹
- ä¿®æ”¹ `ThermalCurve` æ—¶æ³¨æ„ä¿æŒåŸå§‹æ•°æ®ä¸å¯å˜æ€§
- æ·»åŠ æ–°çš„ `InstrumentType` æ—¶éœ€æ›´æ–° `getYAxisLabel()` æ–¹æ³•
- æ·»åŠ æ–°çš„ `SignalType` æ—¶éœ€æ›´æ–°ç®—æ³•çš„ `getOutputSignalType()` æ–¹æ³•

### UTF-8 ç¼–ç æ”¯æŒ
é¡¹ç›®é…ç½®äº† UTF-8 æ”¯æŒ:
```qmake
win32:msvc: QMAKE_CXXFLAGS += /utf-8
win32:g++:  QMAKE_CXXFLAGS += -finput-charset=UTF-8 -fexec-charset=UTF-8
```
æ³¨é‡Šå’Œå­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ä¸­æ–‡ã€‚

### ä»£ç æ³¨é‡Šè§„èŒƒ

**é‡è¦è§„åˆ™**ï¼š

1. **ç¦æ­¢åœ¨ä»£ç æ³¨é‡Šä¸­ä½¿ç”¨è¡¨æƒ…ç¬¦å·å’Œç‰¹æ®Šå›¾æ ‡**
   - âŒ ç¦æ­¢ä½¿ç”¨ï¼š`âœ…`ã€`âŒ`ã€`âœ¨`ã€`ğŸ‰`ã€`ğŸ”¥`ã€`âš ï¸` ç­‰ä»»ä½• Emoji æˆ– Unicode è£…é¥°ç¬¦å·
   - âœ… å…è®¸ä½¿ç”¨ï¼šçº¯æ–‡æœ¬è¯´æ˜ï¼Œå¦‚ `OK`ã€`FIXME`ã€`TODO`ã€`NOTE`ã€`WARNING`

2. **åŸå› **ï¼š
   - ä»£ç æ³¨é‡Šåº”ä¿æŒçº¯æ–‡æœ¬æ ¼å¼ï¼Œç¡®ä¿åœ¨æ‰€æœ‰å¼€å‘ç¯å¢ƒä¸­æ­£ç¡®æ˜¾ç¤º
   - æŸäº› IDEã€ç¼–è¯‘å™¨ã€ä»£ç å®¡æŸ¥å·¥å…·å¯èƒ½æ— æ³•æ­£ç¡®æ¸²æŸ“ Emoji
   - ä¿æŒä»£ç çš„ä¸“ä¸šæ€§å’Œä¸€è‡´æ€§
   - ä¾¿äºæœç´¢ã€æ­£åˆ™åŒ¹é…å’Œä»£ç åˆ†æå·¥å…·å¤„ç†

3. **æ­£ç¡®çš„æ³¨é‡Šé£æ ¼**ï¼š
   ```cpp
   // æ­£ç¡®ï¼šä½¿ç”¨çº¯æ–‡æœ¬æ ‡è®°
   // TODO: å®ç°æ¡†é€‰ç¼©æ”¾åŠŸèƒ½
   // NOTE: æ­¤å‡½æ•°å·²é‡æ„ä¸ºä¸‰ä¸ªå­å‡½æ•°
   // WARNING: æ­¤å¤„éœ€è¦éªŒè¯è¾“å…¥å‚æ•°

   // é”™è¯¯ï¼šä½¿ç”¨è¡¨æƒ…ç¬¦å·
   // âœ… å·²å®Œæˆæ¡†é€‰ç¼©æ”¾åŠŸèƒ½  âŒ ç¦æ­¢è¿™æ ·å†™
   // âœ¨ æ–°å¢è¾…åŠ©å‡½æ•°         âŒ ç¦æ­¢è¿™æ ·å†™
   ```

4. **æ–‡æ¡£ä¸­å¯ä»¥ä½¿ç”¨**ï¼š
   - Markdown æ–‡æ¡£ï¼ˆå¦‚ CLAUDE.mdã€README.mdï¼‰**å¯ä»¥ä½¿ç”¨** Emoji æ¥å¢å¼ºå¯è¯»æ€§
   - ä»£ç æ³¨é‡Šï¼ˆ.cpp/.h æ–‡ä»¶ä¸­çš„ `//` å’Œ `/* */`ï¼‰**ç¦æ­¢ä½¿ç”¨** Emoji
   - Git æäº¤ä¿¡æ¯ï¼ˆcommit messageï¼‰å¯ä»¥é€‚åº¦ä½¿ç”¨ Emoji

### æ–‡æ¡£ç»´æŠ¤æŒ‡å— ğŸ“š

**é‡è¦æé†’**ï¼šæ¯æ¬¡ Claude Code ä¼šè¯å®Œæˆåï¼Œè¯·è®°å¾—æ›´æ–° CLAUDE.md æ–‡æ¡£ï¼

#### å¿«é€Ÿæ›´æ–°æ–¹æ³•

**æ–¹æ³•1ï¼šä½¿ç”¨ Slash Command**ï¼ˆæ¨èï¼‰
```bash
/update-docs
```
è¿™å°†è‡ªåŠ¨åˆ†ææœ€è¿‘çš„æäº¤å¹¶æ›´æ–°æ–‡æ¡£ã€‚

**æ–¹æ³•2ï¼šæ‰‹åŠ¨æ›´æ–° Checklist**

å®Œæˆå¼€å‘ä»»åŠ¡åï¼Œæ£€æŸ¥ä»¥ä¸‹éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼š

- [ ] **é¡¹ç›®è§„æ¨¡ç»Ÿè®¡**ï¼ˆç¬¬9-13è¡Œï¼‰
  - æ›´æ–°æºæ–‡ä»¶æ•°é‡ï¼š`find Analysis/src -name "*.cpp" -o -name "*.h" | wc -l`
  - æ›´æ–°ä»£ç è¡Œæ•°ï¼š`find Analysis/src -name "*.cpp" -exec wc -l {} + | tail -1`
  - æ›´æ–°æ—¥æœŸä¸ºå½“å‰æ—¥æœŸ

- [ ] **æœ€è¿‘å®Œæˆåˆ—è¡¨**ï¼ˆ"å·²çŸ¥é™åˆ¶å’Œåç»­è®¡åˆ’" â†’ "æœ€è¿‘å®Œæˆ âœ…"ï¼‰
  - å°†æ–°åŠŸèƒ½æ·»åŠ åˆ°åˆ—è¡¨æœ€ä¸Šæ–¹
  - æ ¼å¼ï¼š`- âœ… **åŠŸèƒ½åç§°** (YYYY-MM-DD)`
  - åŒ…å«å…³é”®æŠ€æœ¯ç‚¹å’Œæ”¹è¿›è¯´æ˜

- [ ] **æ¶æ„è®¾è®¡ç« èŠ‚**ï¼ˆå¦‚æœ‰æ¶æ„å˜æ›´ï¼‰
  - æ–°å¢çš„ UI ç»„ä»¶æè¿°
  - æ–°å¢çš„ Manager æˆ– Service
  - æ•°æ®æµå‘çš„å˜åŒ–

- [ ] **æ ¸å¿ƒè®¾è®¡æ¨¡å¼**ï¼ˆå¦‚æœ‰æ–°æ¨¡å¼ï¼‰
  - æ–°çš„è®¾è®¡æ¨¡å¼åº”ç”¨
  - é‡è¦çš„é‡æ„è¯´æ˜

- [ ] **UIç»„ä»¶ä½¿ç”¨æŒ‡å—**ï¼ˆå¦‚æœ‰æ–°ç»„ä»¶ï¼‰
  - æ–°ç»„ä»¶çš„åŠŸèƒ½è¯´æ˜
  - ä½¿ç”¨ç¤ºä¾‹ä»£ç 

#### æ›´æ–°è§¦å‘æ—¶æœº

å»ºè®®åœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ›´æ–°æ–‡æ¡£ï¼š
1. âœ… **å®Œæˆä¸€ä¸ªå®Œæ•´åŠŸèƒ½** - ç«‹å³æ›´æ–°"æœ€è¿‘å®Œæˆ"åˆ—è¡¨
2. âœ… **åˆå¹¶ Pull Request å‰** - ç¡®ä¿æ–‡æ¡£ä¸ä»£ç åŒæ­¥
3. âœ… **æ¯å‘¨å®šæœŸæ£€æŸ¥** - è¡¥å……é—æ¼çš„æ›´æ–°
4. âœ… **é‡å¤§æ¶æ„å˜æ›´å** - æ›´æ–°æ¶æ„è®¾è®¡ç« èŠ‚

#### è‡ªåŠ¨åŒ–æé†’

åœ¨æ¯æ¬¡æäº¤å‰ï¼Œå¯ä»¥æ·»åŠ  git æç¤ºï¼š
```bash
# åœ¨ .git/hooks/pre-push ä¸­æ·»åŠ 
echo "âš ï¸  æé†’ï¼šæ˜¯å¦å·²æ›´æ–° CLAUDE.md æ–‡æ¡£ï¼Ÿ (y/n)"
read answer
if [ "$answer" != "y" ]; then
    echo "è¯·å…ˆæ›´æ–°æ–‡æ¡£å†æ¨é€ï¼"
    exit 1
fi
```

#### æ–‡æ¡£è´¨é‡æ ‡å‡†

æ›´æ–°æ–‡æ¡£æ—¶è¯·éµå¾ªï¼š
- ğŸ“ ä½¿ç”¨æ¸…æ™°çš„é¡¹ç›®ç¬¦å·å’Œç»“æ„åŒ–æ ¼å¼
- ğŸ“… æ ‡æ³¨å‡†ç¡®çš„æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- ğŸ¯ æè¿°"åšäº†ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆè¿™æ ·åš"
- ğŸ“Š æ›´æ–°ç»Ÿè®¡æ•°æ®æ—¶ä½¿ç”¨å®é™…æµ‹é‡å€¼
- ğŸ”— æ·»åŠ ç›¸å…³æ–‡ä»¶è·¯å¾„å’Œä»£ç ä½ç½®å¼•ç”¨

## è°ƒè¯•å’Œè¯Šæ–­

### å¾®åˆ†ç®—æ³•è°ƒè¯•
å¾®åˆ†ç®—æ³•æ”¯æŒè°ƒè¯•è¾“å‡º:
```cpp
params["enableDebug"] = true;  // å¯ç”¨è°ƒè¯•è¾“å‡º
params["halfWin"] = 50;        // åŠçª—å£å¤§å°
params["dt"] = 0.1;            // è™šæ‹Ÿæ—¶é—´æ­¥é•¿
```
è°ƒè¯•ä¿¡æ¯ä¼šè¾“å‡ºåˆ°æ§åˆ¶å°,åŒ…æ‹¬çª—å£å¤§å°ã€æ•°æ®ç‚¹æ•°ç­‰ã€‚

è¯¦ç»†è¯´æ˜è§: `å¾®åˆ†ç®—æ³•/å¾®åˆ†ç®—æ³•ä½¿ç”¨è¯´æ˜.md`

### è°ƒè¯•æ—¥å¿—è¯´æ˜
é¡¹ç›®åŒ…å«è°ƒè¯•æ—¥å¿—è¯´æ˜æ–‡æ¡£: `è°ƒè¯•æ—¥å¿—è¯´æ˜.md`

## AlgorithmCoordinator ä½¿ç”¨ç­–ç•¥ ğŸ§ª

### è®¾è®¡ç†å¿µ

**AlgorithmCoordinator** æ˜¯ä¸ºæœªæ¥çš„**äº¤äº’å¼ç®—æ³•**è®¾è®¡çš„åè°ƒå™¨ï¼Œé‡‡ç”¨å®éªŒæ€§æ¶æ„ã€‚

### å½“å‰çŠ¶æ€

**âœ… å·²ç»Ÿä¸€ä½¿ç”¨**:
- æ‰€æœ‰ç®—æ³•æ‰§è¡Œç»Ÿä¸€é€šè¿‡ `AlgorithmCoordinator::handleAlgorithmTriggered()`
- MainController ä¸­ç§»é™¤äº†æ—§çš„ç›´æ¥è°ƒç”¨è·¯å¾„
- ç¡®ä¿æ¶æ„ä¸€è‡´æ€§ï¼Œé¿å…åŒé‡è·¯å¾„

**âš ï¸ å®éªŒæ€§è´¨**:
- å½“å‰ç®€å•ç®—æ³•ï¼ˆå¾®åˆ†ã€ç§¯åˆ†ã€ç§»åŠ¨å¹³å‡ï¼‰**ä¸éœ€è¦**å¤æ‚çš„å‚æ•°å¯¹è¯æ¡†å’Œç‚¹é€‰äº¤äº’
- AlgorithmCoordinator ä¸ºè¿™äº›ç®€å•ç®—æ³•æä¾›äº†ç»Ÿä¸€å…¥å£ï¼Œä½†å…¶æ ¸å¿ƒä»·å€¼å°šæœªå®Œå…¨ä½“ç°

### ä½•æ—¶ä½“ç°ä»·å€¼

AlgorithmCoordinator å°†åœ¨ä»¥ä¸‹åœºæ™¯ä¸­å‘æŒ¥å…³é”®ä½œç”¨ï¼š

1. **åŸºçº¿æ ¡æ­£** (Phase 3)
   - éœ€è¦ç”¨æˆ·åœ¨å›¾è¡¨ä¸Šç‚¹é€‰åŸºçº¿ç‚¹
   - åˆ©ç”¨ `requestPointSelection()` ä¿¡å·
   - ä½¿ç”¨ PendingRequest ç®¡ç†ç‚¹é€‰çŠ¶æ€

2. **å³°é¢ç§¯è®¡ç®—** (Phase 3)
   - éœ€è¦å‚æ•°å¯¹è¯æ¡†æ”¶é›†ç§¯åˆ†èŒƒå›´ã€åŸºçº¿ç±»å‹ç­‰
   - éœ€è¦ç‚¹é€‰å³°çš„èµ·æ­¢ç‚¹
   - åˆ©ç”¨ ParameterThenPoint æµç¨‹

3. **å¤šæ­¥éª¤ç®—æ³•** (Phase 4)
   - å¦‚åŠ¨åŠ›å­¦åˆ†æéœ€è¦å¤šæ¬¡ç”¨æˆ·äº¤äº’
   - çŠ¶æ€æœºç®¡ç†å¤æ‚æµç¨‹

### æŠ€æœ¯å€ºåŠ¡è¯´æ˜

**ä¿ç•™åŸå› **:
- âœ… ä¸ºå³å°†å®ç°çš„åŸºçº¿å’Œå³°é¢ç§¯åŠŸèƒ½åšå‡†å¤‡
- âœ… é¿å…é‡å¤è®¾è®¡å’Œé‡æ„
- âœ… æ¶æ„æ¸…æ™°ï¼Œæ‰©å±•æ€§å¼º

**æˆæœ¬**:
- çº¦ 540 è¡Œä»£ç  (AlgorithmCoordinator + Context + Descriptor)
- å½“å‰ç®€å•ç®—æ³•æœªå……åˆ†åˆ©ç”¨å…¶èƒ½åŠ›

**å»ºè®®**:
- ä¿æŒç°çŠ¶ï¼Œç»§ç»­ä½¿ç”¨ç»Ÿä¸€æ¶æ„
- Phase 3 å®ç°äº¤äº’åŠŸèƒ½æ—¶éªŒè¯è®¾è®¡
- å¦‚å‘ç°è®¾è®¡é—®é¢˜ï¼ŒåŠæ—¶è°ƒæ•´

## å·²çŸ¥é™åˆ¶å’Œåç»­è®¡åˆ’

### æœ€è¿‘å®Œæˆ âœ…
- âœ… **æ¡†é€‰ç¼©æ”¾åŠŸèƒ½** (2025-11-13)
  - å·¦é”®æ‹–åŠ¨æ¡†é€‰åŒºåŸŸï¼Œæ¾å¼€åè‡ªåŠ¨ç¼©æ”¾åˆ°é€‰ä¸­åŒºåŸŸ
  - æ–¹æ¡ˆAï¼šXè½´ç²¾ç¡®ç¼©æ”¾åˆ°æ¡†é€‰èŒƒå›´ï¼ŒYè½´è‡ªé€‚åº”æ•°æ®èŒƒå›´
  - æœ€å°æ¡†é€‰é˜ˆå€¼éªŒè¯ï¼Œé¿å…è¯¯è§¦
  - è¾…åŠ©å‡½æ•°å°è£…ï¼š`convertViewportRectToChartRect()`ã€`finalizeBoxSelection()`
  - ThermalChartView::mousePressEvent/mouseMoveEvent/mouseReleaseEvent å¤„ç†æ¡†é€‰æµç¨‹
- âœ… **ThermalChartView é‡æ„ä¼˜åŒ–** (2025-11-13)
  - å°è£… `handleMassLossToolClick()` å‡½æ•°ï¼Œç®€åŒ–è´¨é‡æŸå¤±å·¥å…·ç‚¹å‡»é€»è¾‘
  - å°è£… `handlePeakAreaToolClick()` å‡½æ•°ï¼Œç®€åŒ–å³°é¢ç§¯å·¥å…·ç‚¹å‡»é€»è¾‘
  - å°è£… `wheelEvent()` ç¼©æ”¾é€»è¾‘ï¼Œæå–ä¸­å¿ƒç‚¹ç¼©æ”¾è®¡ç®—
  - æ‹†åˆ† `eventFilter()` å‡½æ•°ï¼Œæå–å³é”®äº‹ä»¶å¤„ç†ä¸ºç‹¬ç«‹å‡½æ•°
  - ä¼˜åŒ– Ctrl+æ»šè½®ç¼©æ”¾ï¼šä»¥é¼ æ ‡ä½ç½®ä¸ºä¸­å¿ƒç¼©æ”¾ï¼ˆè€Œéå›¾è¡¨ä¸­å¿ƒï¼‰
- âœ… **ç§»é™¤å†—ä½™ç©ºæŒ‡é’ˆæ£€æŸ¥** (2025-11-13)
  - ChartView ä¸­ç§»é™¤ 45 å¤„å¯¹æ„é€ æ—¶æ³¨å…¥å¯¹è±¡çš„å†—ä½™ç©ºæŒ‡é’ˆæ£€æŸ¥
  - å®ç°ä¸¤é˜¶æ®µä¾èµ–æ³¨å…¥ï¼šæ„é€ å‡½æ•°æ³¨å…¥ + `initialize()` å®Œæ•´æ€§æ ¡éªŒ
  - æ‰€æœ‰ä¾èµ–æ³¨å…¥ç»„ä»¶åœ¨ `initialize()` é˜¶æ®µç»Ÿä¸€éªŒè¯ï¼Œè¿è¡Œæ—¶ä¿è¯éç©º
  - ç®€åŒ–ä»£ç é€»è¾‘ï¼Œæé«˜å¯è¯»æ€§å’Œæ€§èƒ½
- âœ… **å®Œå…¨ä¾èµ–æ³¨å…¥æ¶æ„é‡æ„** (2025-11-12) ğŸ‰
  - **ç§»é™¤æ‰€æœ‰å•ä¾‹æ¨¡å¼**ï¼šAlgorithmManagerã€HistoryManagerã€AlgorithmThreadManager ä¸å†æ˜¯å•ä¾‹
  - **æ„é€ å‡½æ•°æ³¨å…¥**ï¼šæ‰€æœ‰ä¾èµ–é€šè¿‡æ„é€ å‡½æ•°æ˜¾å¼ä¼ é€’
    - `AlgorithmManager(AlgorithmThreadManager*, QObject*)` - å¼ºåˆ¶æ³¨å…¥çº¿ç¨‹ç®¡ç†å™¨
    - `AlgorithmThreadManager(QObject*)` - å…¬å¼€æ„é€ å‡½æ•°
    - `HistoryManager(QObject*)` - å…¬å¼€æ„é€ å‡½æ•°
  - **ApplicationContext v2.0**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆå§‹åŒ–é¡ºåº
  - **ä¾èµ–å…³ç³»å®Œå…¨æ˜¾å¼åŒ–**ï¼šæ— éšè—ä¾èµ–ï¼Œåˆå§‹åŒ–é¡ºåºå®Œå…¨å¯æ§
  - **å¯æµ‹è¯•æ€§å¤§å¹…æå‡**ï¼šæ˜“äºæ³¨å…¥ Mock å¯¹è±¡è¿›è¡Œå•å…ƒæµ‹è¯•
  - **ç¬¦åˆ SOLID åŸåˆ™**ï¼šä¾èµ–å€’ç½®ã€å•ä¸€èŒè´£ã€å¼€é—­åŸåˆ™
- âœ… ç»Ÿä¸€åˆå§‹åŒ–æœºåˆ¶ (ApplicationContext v1.0)
- âœ… ç®—æ³•ä¸Šä¸‹æ–‡å®¹å™¨ (AlgorithmContext)
- âœ… ç®—æ³•æµç¨‹åè°ƒå™¨ (AlgorithmCoordinator)
- âœ… é¡¹ç›®æ ‘ç®¡ç†å™¨ (ProjectTreeManager æ›¿æ¢ CurveTreeModel)
- âœ… åŸºçº¿æ ¡æ­£ç®—æ³•å®ç°
- âœ… å‘½ä»¤æ¨¡å¼æ¡†æ¶ (AddCurveCommand ç­‰)
- âœ… åŒæšä¸¾æ‰©å±• (SignalType æ”¯æŒ Baseline å’Œ PeakArea)
- âœ… ä»£ç é‡æ„ä¼˜åŒ– (æ¶ˆé™¤ 150+ è¡Œå†—ä½™ä»£ç ï¼Œç»Ÿä¸€æŠ€æœ¯è·¯çº¿)
- âœ… æ€§èƒ½ä¼˜åŒ– (HistoryManager O(n)â†’O(1)ï¼ŒAlgorithmCoordinator O(nÂ²)â†’O(n))
- âœ… æ¶æ„ç®€åŒ– (ç»Ÿä¸€ä½¿ç”¨ AlgorithmCoordinatorï¼Œç§»é™¤åŒé‡è·¯å¾„)
- âœ… **çº¯ä¸Šä¸‹æ–‡é©±åŠ¨æ‰§è¡Œæ¨¡å¼** (executeWithContext, prepareContext)
  - å½»åº•ç§»é™¤æ—§æ¥å£å’Œå‘åå…¼å®¹å±‚ï¼ˆæ—  process/setParameter/executeï¼‰
  - IThermalAlgorithm åªä¿ç•™ `executeWithContext(AlgorithmContext*)` çº¯è™šå‡½æ•°
  - AlgorithmManager åªä¿ç•™ `executeWithContext(name, context)` å”¯ä¸€æ‰§è¡Œæ¥å£
  - æ‰€æœ‰5ä¸ªç®—æ³•å®Œæˆè¿ç§»ï¼šDifferentiation, Integration, MovingAverage, BaselineCorrection, PeakArea
  - ç®—æ³•ä»ä¸Šä¸‹æ–‡æ‹‰å–æ•°æ®ï¼Œé›¶å‚æ•°ä¼ é€’ï¼Œå•ä¸€æ•°æ®æº
- âœ… **ä¸¤é˜¶æ®µæ‰§è¡Œæœºåˆ¶** (prepareContext è¿”å› bool)
  - é˜¶æ®µ1ï¼ˆprepareContextï¼‰ï¼šéªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œè¿”å›å°±ç»ªçŠ¶æ€
  - é˜¶æ®µ2ï¼ˆexecuteWithContextï¼‰ï¼šåªåœ¨æ•°æ®å®Œæ•´æ—¶æ‰§è¡Œè®¡ç®—
  - AlgorithmManager æ£€æŸ¥å°±ç»ªçŠ¶æ€ï¼Œæ•°æ®ä¸å®Œæ•´æ—¶æå‰ç»ˆæ­¢
  - é˜²æ­¢ç®—æ³•åœ¨ç”¨æˆ·æœªå®Œæˆäº¤äº’æ—¶è¿‡æ—©æ‰§è¡Œ
  - BaselineCorrectionAlgorithm éªŒè¯è‡³å°‘2ä¸ªé€‰ç‚¹
  - æ‰€æœ‰ç®—æ³•å®ç°æ•°æ®å®Œæ•´æ€§éªŒè¯é€»è¾‘
- âœ… **AlgorithmResult ç»Ÿä¸€è¾“å‡ºå®¹å™¨** (v1.0)
  - ç»“æ„åŒ–ç®—æ³•è¾“å‡ºï¼šCurve, Marker, Region, ScalarValue, Composite
  - ç±»å‹å®‰å…¨çš„ç»“æœè®¿é—®æ¥å£
  - å†…ç½®æˆåŠŸ/å¤±è´¥çŠ¶æ€å’Œé”™è¯¯å¤„ç†
  - æ”¯æŒæ··åˆè¾“å‡ºï¼ˆå¦‚å³°é¢ç§¯=æ•°å€¼+æ›²çº¿+åŒºåŸŸ+æ ‡æ³¨ï¼‰
  - æ‰€æœ‰ç®—æ³•è¿ç§»åˆ°æ–°çš„è¿”å›å€¼ç±»å‹
- âœ… **å³°é¢ç§¯è®¡ç®—ç®—æ³•** (PeakAreaAlgorithm)
  - Bç±»äº¤äº’ç®—æ³•ï¼Œç”¨æˆ·é€‰æ‹©2ä¸ªç‚¹å®šä¹‰ç§¯åˆ†èŒƒå›´
  - ä½¿ç”¨æ¢¯å½¢ç§¯åˆ†æ³•è®¡ç®—å³°é¢ç§¯
  - æ··åˆè¾“å‡ºï¼šæ•°å€¼ç»“æœ + FloatingLabel æ˜¾ç¤º
  - æ”¯æŒæ‰€æœ‰ä»ªå™¨ç±»å‹ï¼ˆTGA/DSC/ARCï¼‰
- âœ… **æµ®åŠ¨æ ‡ç­¾ç»„ä»¶** (FloatingLabel)
  - æ•°æ®é”šå®šæ¨¡å¼ï¼šè·Ÿéšå›¾è¡¨ç¼©æ”¾
  - è§†å›¾é”šå®šæ¨¡å¼ï¼šHUDå›ºå®šä½ç½®
  - æ‹–åŠ¨ã€ç¼©æ”¾ï¼ˆCtrl+æ»šè½®ï¼‰ã€é”å®šåŠŸèƒ½
  - å…³é—­æŒ‰é’®ã€é”å®šæŒ‰é’®
  - åº”ç”¨äºå³°é¢ç§¯ã€æµ‹é‡å·¥å…·ç­‰åœºæ™¯
- âœ… **æµ‹é‡å·¥å…·** (TrapezoidMeasureTool)
  - ç›´è§’æ¢¯å½¢æµ‹é‡å·¥å…·ï¼Œæµ‹é‡å‚ç›´é«˜åº¦å·®ï¼ˆè´¨é‡æŸå¤±ï¼‰
  - ä¸¤ä¸ªå¯æ‹–åŠ¨ç«¯ç‚¹ï¼Œè‡ªåŠ¨å¸é™„æ›²çº¿
  - å®æ—¶æ˜¾ç¤ºæµ‹é‡å€¼
  - æ”¯æŒæ¨ªè½´åˆ‡æ¢ï¼ˆæ¸©åº¦/æ—¶é—´ï¼‰åŒæ­¥
- âœ… **æ›²çº¿çº§è”åˆ é™¤åŠŸèƒ½** (v1.0.0)
  - ä¸»æ›²çº¿ä¿æŠ¤ï¼šä»æ–‡ä»¶å¯¼å…¥çš„åŸå§‹æ•°æ®ä¸èƒ½åˆ é™¤
  - æ´¾ç”Ÿæ›²çº¿çº§è”åˆ é™¤ï¼šè‡ªåŠ¨é€’å½’åˆ é™¤æ‰€æœ‰å­æ›²çº¿
  - ç¡®è®¤å¯¹è¯æ¡†ï¼šæ˜¾ç¤ºå°†åˆ é™¤çš„å­æ›²çº¿åˆ—è¡¨
  - æ·±åº¦ä¼˜å…ˆéå†ï¼šå…ˆåˆ é™¤å­æ›²çº¿ï¼Œå†åˆ é™¤çˆ¶æ›²çº¿
- âœ… **å›¾è¡¨äº¤äº’å¢å¼º**
  - å·¦é”®æ¡†é€‰ç¼©æ”¾åŠŸèƒ½ï¼ˆæ–¹æ¡ˆAï¼šXè½´ç²¾ç¡®ç¼©æ”¾ï¼ŒYè½´è‡ªé€‚åº”ï¼‰
  - å³é”®æ‹–åŠ¨å¹³ç§»åŠŸèƒ½
  - Ctrl+æ»šè½®ç¼©æ”¾åŠŸèƒ½
  - æ¨ªè½´åˆ‡æ¢ï¼šæ¸©åº¦/æ—¶é—´æ¨¡å¼ï¼ˆXAxisModeï¼‰
  - ä¿®å¤å¤šYè½´ç¼©æ”¾å¯¼è‡´æ›²çº¿ä¸¢å¤±çš„é—®é¢˜
  - ä¿®å¤å³é”®æ‹–åŠ¨Yæ–¹å‘ç›¸åçš„é—®é¢˜
- âœ… **ChartView ä¸‰å±‚æ¶æ„é‡æ„** (Phase 1-5 å®Œæˆ)
  - å°†å•ä½“ ChartView (2207è¡Œ) é‡æ„ä¸ºä¸‰å±‚æ¶æ„ (2553è¡Œ)
  - **ThermalChart** (1064è¡Œ): æ•°æ®ç®¡ç†å±‚ - æ›²çº¿/åæ ‡è½´/å åŠ ç‰©ç®¡ç†
  - **ThermalChartView** (493è¡Œ): äº¤äº’å¤„ç†å±‚ - é¼ æ ‡/é”®ç›˜äº‹ä»¶ã€ç¢°æ’æ£€æµ‹ã€ç¼©æ”¾å¹³ç§»
  - **ChartView** (693è¡Œ): å®¹å™¨å±‚ + ç®—æ³•çŠ¶æ€æœº - è½¬å‘è°ƒç”¨ã€ç®¡ç†äº¤äº’çŠ¶æ€
  - ä»£ç ç®€åŒ– 68.6%ï¼ŒèŒè´£åˆ†ç¦»æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæµ‹è¯•
  - å•å‘ä¾èµ–ï¼šChartView â†’ ThermalChartView â†’ ThermalChart
  - ä¿æŒå‘åå…¼å®¹ï¼Œå¤–éƒ¨ API ä¸å˜
- âœ… **æ’¤é”€/é‡åšåŠŸèƒ½å®Œå…¨é›†æˆ** (HistoryManager + Command Pattern)
  - HistoryManager å•ä¾‹ç®¡ç†å‘½ä»¤å†å² (æ”¯æŒ50æ­¥æ’¤é”€/é‡åš)
  - ICommand æ¥å£å®šä¹‰å‘½ä»¤æ¨¡å¼ï¼ˆexecute/undo/redoï¼‰
  - AddCurveCommandã€AlgorithmCommandã€BaselineCommand å·²å®ç°
  - AlgorithmManager ä½¿ç”¨ AddCurveCommand é€šè¿‡ HistoryManager æ·»åŠ æ›²çº¿
  - MainWindow æ·»åŠ æ’¤é”€/é‡åšæŒ‰é’®å’Œå¿«æ·é”® (Ctrl+Z/Ctrl+Y)
  - MainController å®ç° onUndo/onRedo æ§½å‡½æ•°
  - æ‰€æœ‰ç®—æ³•æ‰§è¡Œè‡ªåŠ¨æ”¯æŒæ’¤é”€/é‡åš

### å½“å‰é™åˆ¶
1. ä»…æ”¯æŒå•é¡¹ç›®æ¨¡å¼(å¯¼å…¥æ–°æ•°æ®ä¼šæ¸…ç©ºå·²æœ‰æ›²çº¿)
2. ç®—æ³•å‚æ•°æ”¶é›†å¯¹è¯æ¡†å°šæœªå®ç°
3. åŠ¨åŠ›å­¦è®¡ç®—åŠŸèƒ½å¾…å®ç°
4. é¡¹ç›®ä¿å­˜/åŠ è½½åŠŸèƒ½å¾…å®ç°
5. æ›²çº¿å¯¼å‡ºåŠŸèƒ½å¾…å®ç°
6. å³°å€¼æ£€æµ‹ç®—æ³•å¾…å®ç°
7. å½’ä¸€åŒ–ç®—æ³•å¾…å®ç°

### å¼€å‘è®¡åˆ’ (è¯¦è§ `Analysis/ARCHITECTURE_OPTIMIZATION_PLAN.md`)

**çŸ­æœŸ (Phase 1 - å‘½ä»¤æ¨¡å¼å’Œå†å²ç®¡ç†)** âœ… å·²å®Œæˆ:
- âœ… HistoryManager å’Œå‘½ä»¤æ¨¡å¼é›†æˆå®Œæˆ
- âœ… æ‰€æœ‰ä¿®æ”¹æ“ä½œå·²ä½¿ç”¨ Command å°è£… (AddCurveCommand ç­‰)
- âœ… æ’¤é”€/é‡åšåŠŸèƒ½å·²é›†æˆå¹¶æµ‹è¯•

**ä¸­æœŸ (Phase 2 - é¡¹ç›®ç®¡ç†)**:
- ProjectManager å¤šé¡¹ç›®æ”¯æŒ
- é¡¹ç›®ä¿å­˜/åŠ è½½åŠŸèƒ½
- æ›²çº¿å¯¼å‡ºå’Œå›¾è¡¨å¯¼å‡º

**ä¸­æœŸ (Phase 3 - ç®—æ³•æ‰©å±•)**:
- ç®—æ³•å‚æ•°æ”¶é›†å¯¹è¯æ¡† (åŸºäº AlgorithmDescriptor)
- å³°å€¼æ£€æµ‹ç®—æ³• (Markerè¾“å‡º)
- å½’ä¸€åŒ–ç®—æ³•
- å¤–æ¨æ³•ï¼ˆOnset/Endsetæ¸©åº¦ï¼‰
- åˆ‡çº¿æ³•

**é•¿æœŸ (Phase 4 - é«˜çº§åŠŸèƒ½)**:
- åŠ¨åŠ›å­¦åˆ†æ(Kissingerã€Ozawaã€Flynn-Wall-Ozawa ç­‰)
- æ•°æ®åº“æ”¯æŒ
- æ‰¹å¤„ç†å’Œè„šæœ¬ç³»ç»Ÿ
- æ’ä»¶ç³»ç»Ÿ
- æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ

## UIç»„ä»¶ä½¿ç”¨æŒ‡å—

### FloatingLabel æµ®åŠ¨æ ‡ç­¾

**åŠŸèƒ½**: å¯æ‹–åŠ¨ã€å¯ç¼©æ”¾ã€æ‚¬æµ®åœ¨å›¾è¡¨ä¸Šçš„æ–‡æœ¬æ ‡ç­¾

**ç‰¹æ€§**:
- æ•°æ®é”šå®šæ¨¡å¼ (DataAnchored): é”šå®šåˆ°æ•°æ®åæ ‡ï¼Œéšå›¾è¡¨ç¼©æ”¾ç§»åŠ¨
- è§†å›¾é”šå®šæ¨¡å¼ (ViewAnchored): é”šå®šåˆ°è§†å›¾åƒç´ ä½ç½®ï¼ˆHUDï¼‰ï¼Œä¸å—å›¾è¡¨ç¼©æ”¾å½±å“
- æ‹–åŠ¨ç§»åŠ¨ï¼ˆé¼ æ ‡å·¦é”®æ‹–æ‹½ï¼‰
- ç¼©æ”¾ï¼ˆCtrl+æ»šè½®ï¼‰
- å…³é—­æŒ‰é’®ï¼ˆå³ä¸Šè§’ï¼‰
- å›ºå®š/è§£é”ï¼ˆé”å®šåç¦æ­¢æ‹–åŠ¨ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```cpp
// æ·»åŠ æ•°æ®é”šå®šæ ‡ç­¾
FloatingLabel* label = chartView->addFloatingLabel(
    "æ¸©åº¦=350Â°C\nå€¼=1.23 mg",  // æ”¯æŒå¤šè¡Œæ–‡æœ¬
    QPointF(350.0, 1.23),       // æ•°æ®åæ ‡
    curveId                     // æ›²çº¿ID
);

// æ·»åŠ è§†å›¾é”šå®šæ ‡ç­¾ï¼ˆHUDï¼‰
FloatingLabel* hud = chartView->addFloatingLabelHUD(
    "å®éªŒæ¡ä»¶\nT=25Â°C",
    QPointF(60, 30)  // è§†å›¾åæ ‡ï¼ˆåƒç´ ï¼‰
);
```

è¯¦è§: `Analysis/FloatingLabel_ä½¿ç”¨ç¤ºä¾‹.md`

### TrapezoidMeasureTool æµ‹é‡å·¥å…·

**åŠŸèƒ½**: æµ‹é‡æ›²çº¿ä¸Šä¸¤ç‚¹ä¹‹é—´çš„å‚ç›´é«˜åº¦å·®ï¼ˆè´¨é‡æŸå¤±ï¼‰

**ç‰¹æ€§**:
- ä¸¤ä¸ªå¯æ‹–åŠ¨çš„ç«¯ç‚¹ï¼ˆè‡ªåŠ¨å¸é™„åˆ°æ›²çº¿ï¼‰
- ç»˜åˆ¶ç›´è§’æ¢¯å½¢ï¼ˆä¸¤æ¡æ°´å¹³çº¿ + ä¸€æ¡ç«–ç›´çº¿ï¼‰
- å®æ—¶æ˜¾ç¤ºå‚ç›´è·ç¦»æµ‹é‡å€¼
- å¯ä»¥åˆ é™¤ï¼ˆå³ä¸Šè§’å…³é—­æŒ‰é’®ï¼‰
- æ”¯æŒæ¨ªè½´åˆ‡æ¢ï¼ˆæ¸©åº¦/æ—¶é—´ï¼‰åŒæ­¥

**ä½¿ç”¨æ–¹å¼**:
1. ç”¨æˆ·ç‚¹å‡»"è´¨é‡æŸå¤±"æŒ‰é’®
2. åœ¨å›¾è¡¨ä¸Šæ‹–åŠ¨é¼ æ ‡é€‰æ‹©ä¸¤ä¸ªç‚¹
3. å·¥å…·è‡ªåŠ¨ç»˜åˆ¶å¹¶æ˜¾ç¤ºæµ‹é‡å€¼
4. å¯ä»¥æ‹–åŠ¨ç«¯ç‚¹é‡æ–°è°ƒæ•´æµ‹é‡èŒƒå›´

### ChartView äº¤äº’åŠŸèƒ½

**äº¤äº’æ¨¡å¼**:
- `View` æ¨¡å¼: ç¼©æ”¾ã€å¹³ç§»ã€åŒºåŸŸé€‰æ‹©
- `Pick` æ¨¡å¼: é€‰æ‹©æ•°æ®ç‚¹ã€æµ‹é‡ã€æ˜¾ç¤ºåæ ‡

**æ¨ªè½´æ¨¡å¼**:
- `Temperature` æ¨¡å¼: ä»¥æ¸©åº¦ä¸ºæ¨ªè½´ï¼ˆé»˜è®¤ï¼‰
- `Time` æ¨¡å¼: ä»¥æ—¶é—´ä¸ºæ¨ªè½´

**é¼ æ ‡æ“ä½œ**:
- **å³é”®æ‹–åŠ¨**: å¹³ç§»å›¾è¡¨
- **Ctrl + æ»šè½®**: ç¼©æ”¾å›¾è¡¨
- **å·¦é”®ç‚¹å‡»**: é€‰æ‹©æ›²çº¿/é€‰ç‚¹ï¼ˆæ ¹æ®å½“å‰æ¨¡å¼ï¼‰

### æ›²çº¿ç®¡ç†åŠŸèƒ½

**æ›²çº¿å±æ€§**:
- `isMainCurve`: ä¸»æ›²çº¿ï¼ˆä»æ–‡ä»¶å¯¼å…¥çš„åŸå§‹æ•°æ®ï¼Œä¸å¯åˆ é™¤ï¼‰
- `isAuxiliaryCurve`: è¾…åŠ©æ›²çº¿ï¼ˆç»§æ‰¿çˆ¶æ›²çº¿çš„Yè½´ï¼‰
- `isStronglyBound`: å¼ºç»‘å®šæ›²çº¿ï¼ˆä¸åœ¨æ ‘ä¸­ç‹¬ç«‹æ˜¾ç¤ºï¼Œéšçˆ¶æ›²çº¿éšè—ï¼‰

**åˆ é™¤ç­–ç•¥**:
- ä¸»æ›²çº¿ä¿æŠ¤ï¼šä¸èƒ½åˆ é™¤ä¸»æ›²çº¿ï¼Œåªèƒ½é€šè¿‡"æ¸…ç©ºé¡¹ç›®"ç§»é™¤
- çº§è”åˆ é™¤ï¼šåˆ é™¤æ´¾ç”Ÿæ›²çº¿æ—¶è‡ªåŠ¨é€’å½’åˆ é™¤æ‰€æœ‰å­æ›²çº¿
- ç¡®è®¤å¯¹è¯æ¡†ï¼šæ˜¾ç¤ºå°†åˆ é™¤çš„å­æ›²çº¿åˆ—è¡¨

è¯¦è§: `Analysis/æ›²çº¿çº§è”åˆ é™¤åŠŸèƒ½è¯´æ˜.md`

## ç›¸å…³æ–‡æ¡£

### æ¶æ„è®¾è®¡æ–‡æ¡£
- **ä¸»æ¶æ„è®¾è®¡**: `è®¾è®¡æ–‡æ¡£/01_ä¸»æ¶æ„è®¾è®¡.md`
- **å››å±‚æ¶æ„è¯¦è§£**: `è®¾è®¡æ–‡æ¡£/02_å››å±‚æ¶æ„è¯¦è§£.md`
- **æ¶æ„æ¡ˆä¾‹åˆ†æ**: `è®¾è®¡æ–‡æ¡£/03_æ¶æ„æ¡ˆä¾‹åˆ†æ.md`
- **æ¶æ„ä¼˜åŒ–è®¡åˆ’**: `Analysis/ARCHITECTURE_OPTIMIZATION_PLAN.md` (å››é˜¶æ®µè·¯çº¿å›¾)

### åŠŸèƒ½è®¾è®¡æ–‡æ¡£
- **åŠŸèƒ½è¯´æ˜**: `Analysis/åŠŸèƒ½è¯´æ˜.md` (v0.1.0-alpha)
- **UIè®¾è®¡æ–‡æ¡£**: `è®¾è®¡æ–‡æ¡£/UI è®¾è®¡æ–‡æ¡£ â€” ä»¿ AKTS-Thermokinetics.md`
- **æ’¤é”€é‡åšåŠŸèƒ½**: `è®¾è®¡æ–‡æ¡£/æ’¤é”€é‡åšåŠŸèƒ½å®ç°æ–‡æ¡£.md`
- **æ›²çº¿äº¤äº’åŠŸèƒ½**: `è®¾è®¡æ–‡æ¡£/æ›²çº¿äº¤äº’åŠŸèƒ½å®ç°è®¡åˆ’.md`

### æœ€æ–°è®¾è®¡æ–‡æ¡£ ğŸ†• (`æ–°è®¾è®¡æ–‡æ¡£/`)
- **AlgorithmContext ç±»è®¾è®¡**: `æ–°è®¾è®¡æ–‡æ¡£/ğŸ“˜ AlgorithmContext ç±»è®¾è®¡æ–‡æ¡£.md` (æ ¸å¿ƒä¸Šä¸‹æ–‡å®¹å™¨è®¾è®¡)
- **AlgorithmContext æ•°æ®æ¸…å•**: `æ–°è®¾è®¡æ–‡æ¡£/AlgorithmContext_æ•°æ®æ¸…å•.md` (60+ æ•°æ®é¡¹, 15 ä¸ªç±»åˆ«)
- **AlgorithmResult ç»Ÿä¸€è¾“å‡º**: `æ–°è®¾è®¡æ–‡æ¡£/ç»Ÿä¸€è¾“å‡ºç®—æ³•_AlgorithmResultè®¾è®¡.md` (ç»“æ„åŒ–ç®—æ³•è¾“å‡ºå®¹å™¨)
- **MVC å±‚æ¬¡åˆ’åˆ†æ€»è§ˆ**: `æ–°è®¾è®¡æ–‡æ¡£/ä¸€ã€MVC å±‚æ¬¡åˆ’åˆ†æ€»è§ˆ.md` (æœ€æ–°æ¶æ„åˆ†å±‚)
- **ç»Ÿä¸€åˆå§‹åŒ–**: `æ–°è®¾è®¡æ–‡æ¡£/ç»Ÿä¸€åˆå§‹åŒ–.md` (ApplicationContext è®¾è®¡)
- **äº¤äº’ç±»**: `æ–°è®¾è®¡æ–‡æ¡£/äº¤äº’ç±».md`
- **æŠ½è±¡ç®—æ³•è¡Œä¸ºç±»å‹**: `æ–°è®¾è®¡æ–‡æ¡£/æŠ½è±¡ç®—æ³•è¡Œä¸ºç±»å‹.md`

### åŠŸèƒ½è¯´æ˜æ–‡æ¡£
- **FloatingLabel ä½¿ç”¨ç¤ºä¾‹**: `Analysis/FloatingLabel_ä½¿ç”¨ç¤ºä¾‹.md`
- **æ›²çº¿çº§è”åˆ é™¤åŠŸèƒ½**: `Analysis/æ›²çº¿çº§è”åˆ é™¤åŠŸèƒ½è¯´æ˜.md` (v1.0.0)

### ç®—æ³•æ–‡æ¡£
- **å¾®åˆ†ç®—æ³•ä½¿ç”¨è¯´æ˜**: `å¾®åˆ†ç®—æ³•/å¾®åˆ†ç®—æ³•ä½¿ç”¨è¯´æ˜.md` (å¤§çª—å£å¹³æ»‘ä¸­å¿ƒå·®åˆ†æ³•)

### å…¶ä»–æ–‡æ¡£
- **ä¿¡å·æµè®¾è®¡**: `è®¾è®¡å›¾/ä¿¡å·æµè®¾è®¡.md`

## ä»£ç è´¨é‡è¦æ±‚

- éµå¾ª C++17 æ ‡å‡†
- ä¿æŒå±‚æ¬¡åˆ†ç¦»,ä¸è¿åä¾èµ–è§„åˆ™
- UI å±‚ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- ç®—æ³•å®ç°åº”è¯¥é€šç”¨åŒ–,æ”¯æŒæ‰€æœ‰ä»ªå™¨ç±»å‹
- ä¿®æ”¹æ•°æ®çš„æ“ä½œåº”å°è£…ä¸º Command ä»¥æ”¯æŒæ’¤é”€
- ä½¿ç”¨ä¿¡å·æ§½æœºåˆ¶å®ç°æ¾è€¦åˆ
- æ³¨é‡Šåº”æ¸…æ™°è¯´æ˜ç±»çš„èŒè´£å’Œæ–¹æ³•çš„ç”¨é€”

## è®¾è®¡åŸåˆ™

æœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ªç°ä»£è½¯ä»¶å·¥ç¨‹çš„è®¾è®¡åŸåˆ™ï¼Œç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯æµ‹è¯•æ€§ã€‚

### SOLID åŸåˆ™

**S - Single Responsibility Principle (å•ä¸€èŒè´£åŸåˆ™)**
- æ¯ä¸ªç±»ã€å‡½æ•°åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„ä»»åŠ¡
- ç¤ºä¾‹ï¼š
  - `ThermalChart::rescaleYAxisForXRange()` æ‹†åˆ†ä¸º3ä¸ªå­å‡½æ•°
  - `isSeriesAttachedToYAxis()` - ä»…è´Ÿè´£æ£€æŸ¥ç»‘å®šå…³ç³»
  - `calculateYRangeInXRange()` - ä»…è´Ÿè´£è®¡ç®— Y å€¼èŒƒå›´
- ä¼˜åŠ¿ï¼šä¿®æ”¹æŸä¸ªåŠŸèƒ½æ—¶ä¸å½±å“å…¶ä»–åŠŸèƒ½ï¼Œé™ä½è€¦åˆ

**O - Open/Closed Principle (å¼€é—­åŸåˆ™)**
- å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- ç¤ºä¾‹ï¼š
  - é€šè¿‡å®ç° `IThermalAlgorithm` æ¥å£æ·»åŠ æ–°ç®—æ³•ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 
  - é€šè¿‡ç»„åˆè¾…åŠ©å‡½æ•°æ‰©å±•åŠŸèƒ½ï¼Œè€Œéä¿®æ”¹ä¸»å‡½æ•°
- ä¼˜åŠ¿ï¼šæ–°åŠŸèƒ½ä¸ç ´åå·²æœ‰åŠŸèƒ½ï¼Œé™ä½å›å½’é£é™©

**L - Liskov Substitution Principle (é‡Œæ°æ›¿æ¢åŸåˆ™)**
- å­ç±»åº”è¯¥å¯ä»¥æ›¿æ¢çˆ¶ç±»è€Œä¸æ”¹å˜ç¨‹åºçš„æ­£ç¡®æ€§
- ç¤ºä¾‹ï¼š
  - æ‰€æœ‰ç®—æ³•å®ç°éƒ½å¯ä»¥æ›¿æ¢ `IThermalAlgorithm` æ¥å£
  - æ‰€æœ‰æ–‡ä»¶è¯»å–å™¨éƒ½å¯ä»¥æ›¿æ¢ `IFileReader` æ¥å£
- ä¼˜åŠ¿ï¼šæ¥å£æŠ½è±¡æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•å’Œæ›¿æ¢å®ç°

**I - Interface Segregation Principle (æ¥å£éš”ç¦»åŸåˆ™)**
- å®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£
- ç¤ºä¾‹ï¼š
  - `IThermalAlgorithm` åªå®šä¹‰ç®—æ³•æ ¸å¿ƒæ¥å£
  - `IFileReader` åªå®šä¹‰æ–‡ä»¶è¯»å–æ¥å£
- ä¼˜åŠ¿ï¼šæ¥å£å°è€Œç²¾ï¼Œé¿å…è‡ƒè‚¿çš„"èƒ–æ¥å£"

**D - Dependency Inversion Principle (ä¾èµ–å€’ç½®åŸåˆ™)**
- é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½åº”ä¾èµ–æŠ½è±¡
- ç¤ºä¾‹ï¼š
  - `ApplicationContext` é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
  - `AlgorithmManager` ä¾èµ– `IThermalAlgorithm` æ¥å£ï¼Œè€Œéå…·ä½“å®ç°
- ä¼˜åŠ¿ï¼šè§£è€¦æ¨¡å—ï¼Œæ˜“äºå•å…ƒæµ‹è¯•å’Œæ›¿æ¢å®ç°

### DRY åŸåˆ™ (Don't Repeat Yourself)

**åŸåˆ™**ï¼šé¿å…ä»£ç é‡å¤ï¼Œæå–å¯å¤ç”¨çš„é€»è¾‘

**å®è·µç¤ºä¾‹**ï¼š
1. **åæ ‡è½¬æ¢é€»è¾‘å¤ç”¨**
   ```cpp
   // é”™è¯¯ï¼šåœ¨ mouseMoveEvent å’Œ mouseReleaseEvent ä¸­é‡å¤ç›¸åŒé€»è¾‘
   QPointF sceneStart = mapToScene(m_boxSelectStart.toPoint());
   QPointF sceneEnd = mapToScene(m_boxSelectEnd.toPoint());
   QPointF chartStart = chart()->mapFromScene(sceneStart);
   QPointF chartEnd = chart()->mapFromScene(sceneEnd);

   // æ­£ç¡®ï¼šæå–ä¸ºå¯å¤ç”¨å‡½æ•°
   QRectF convertViewportRectToChartRect(const QPointF& start, const QPointF& end) const;
   ```

2. **Y è½´ç»‘å®šæ£€æŸ¥å¤ç”¨**
   ```cpp
   // é”™è¯¯ï¼šåœ¨å¤šå¤„é‡å¤æ£€æŸ¥é€»è¾‘
   for (QAbstractAxis* axis : lineSeries->attachedAxes()) {
       if (axis == yAxis) { ... }
   }

   // æ­£ç¡®ï¼šæå–ä¸ºç‹¬ç«‹å‡½æ•°
   bool isSeriesAttachedToYAxis(QLineSeries* series, QValueAxis* yAxis) const;
   ```

**ä¼˜åŠ¿**ï¼š
- å‡å°‘ä»£ç é‡å¤ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- ä¿®æ”¹ä¸€å¤„ï¼Œæ‰€æœ‰è°ƒç”¨å¤„è‡ªåŠ¨æ›´æ–°
- æé«˜ä»£ç ä¸€è‡´æ€§

### KISS åŸåˆ™ (Keep It Simple, Stupid)

**åŸåˆ™**ï¼šä¿æŒç®€å•ï¼Œé¿å…è¿‡åº¦è®¾è®¡

**å®è·µå»ºè®®**ï¼š
- å‡½æ•°é•¿åº¦æ§åˆ¶åœ¨ 50 è¡Œä»¥å†…ï¼ˆè¶…è¿‡åˆ™è€ƒè™‘æ‹†åˆ†ï¼‰
- å‡½æ•°å‚æ•°ä¸è¶…è¿‡ 5 ä¸ªï¼ˆè¿‡å¤šåˆ™è€ƒè™‘å°è£…ä¸ºç»“æ„ä½“ï¼‰
- é¿å…æ·±å±‚åµŒå¥—ï¼ˆåµŒå¥—ä¸è¶…è¿‡ 3 å±‚ï¼‰
- ä¼˜å…ˆä½¿ç”¨æ¸…æ™°çš„å‘½åï¼Œè€Œéå¤æ‚çš„æ³¨é‡Š

### YAGNI åŸåˆ™ (You Aren't Gonna Need It)

**åŸåˆ™**ï¼šä¸è¦å®ç°å½“å‰ä¸éœ€è¦çš„åŠŸèƒ½

**å®è·µå»ºè®®**ï¼š
- åªå®ç°å½“å‰éœ€æ±‚ï¼Œä¸æå‰è®¾è®¡æœªæ¥å¯èƒ½éœ€è¦çš„åŠŸèƒ½
- é¿å…è¿‡åº¦æŠ½è±¡å’Œè¿‡åº¦å°è£…
- é€šè¿‡è¿­ä»£å¼€å‘é€æ­¥å®Œå–„åŠŸèƒ½

### ç»„åˆä¼˜äºç»§æ‰¿

**åŸåˆ™**ï¼šä¼˜å…ˆä½¿ç”¨ç»„åˆï¼ˆèšåˆï¼‰è€Œéç»§æ‰¿

**å®è·µç¤ºä¾‹**ï¼š
```cpp
// ChartView ç»„åˆ ThermalChart å’Œ ThermalChartView
class ChartView : public QWidget {
private:
    ThermalChart* m_chart;           // ç»„åˆï¼šæ•°æ®ç®¡ç†
    ThermalChartView* m_chartView;   // ç»„åˆï¼šäº¤äº’å¤„ç†
};
```

**ä¼˜åŠ¿**ï¼š
- æ›´çµæ´»ï¼šå¯ä»¥åŠ¨æ€æ”¹å˜ç»„åˆå¯¹è±¡
- æ›´æ¾è€¦åˆï¼šé¿å…æ·±å±‚ç»§æ‰¿é“¾
- æ›´æ˜“æµ‹è¯•ï¼šå¯ä»¥æ³¨å…¥ Mock å¯¹è±¡

## é¡¹ç›®æŠ€æœ¯äº®ç‚¹ ğŸŒŸ

### æ¶æ„è®¾è®¡ä¼˜åŠ¿

**å››å±‚æ¶æ„ + DDD**:
- âœ… **ä¸¥æ ¼åˆ†å±‚**: è¡¨ç¤ºå±‚ â†’ åº”ç”¨å±‚ â†’ é¢†åŸŸå±‚ â†’ åŸºç¡€è®¾æ–½å±‚ï¼Œå•å‘ä¾èµ–
- âœ… **ä¾èµ–æ³¨å…¥**: ApplicationContext ç»Ÿä¸€åˆå§‹åŒ–ï¼Œé¿å…å¾ªç¯ä¾èµ–
- âœ… **æ¥å£é©±åŠ¨**: IThermalAlgorithmã€IFileReaderã€ICommand ç­‰æŠ½è±¡æ¥å£
- âœ… **èŒè´£å•ä¸€**: æ¯ä¸ªç±»èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæµ‹è¯•

**åˆ›æ–°è®¾è®¡æ¨¡å¼**:
- ğŸ”¥ **åŒæšä¸¾åˆ†ç¦»è®¾è®¡**: `InstrumentType` + `SignalType` åˆ†ç¦»ï¼Œè¯­ä¹‰æ¸…æ™°ã€æ˜“æ‰©å±•
- ğŸ”¥ **çº¯ä¸Šä¸‹æ–‡é©±åŠ¨æ‰§è¡Œ**: ç®—æ³•æ‹‰å–æ•°æ®ï¼Œé›¶å‚æ•°ä¼ é€’ï¼Œç±»å‹å®‰å…¨
- ğŸ”¥ **ä¸¤é˜¶æ®µæ‰§è¡Œæœºåˆ¶**: prepareContext éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œé˜²æ­¢è¿‡æ—©æ‰§è¡Œ
- ğŸ”¥ **ç»Ÿä¸€è¾“å‡ºå®¹å™¨**: AlgorithmResult å°è£…5ç§ç»“æœç±»å‹ï¼Œç»“æ„åŒ–è¾“å‡º
- ğŸ”¥ **æ´»åŠ¨ç®—æ³•çŠ¶æ€æœº**: ChartView ç®¡ç†äº¤äº’æµç¨‹ï¼Œè‡ªåŠ¨è§¦å‘æ‰§è¡Œ

### ä»£ç è´¨é‡

**å¯ç»´æŠ¤æ€§**:
- ğŸ“š **è¯¦ç»†æ–‡æ¡£**: æ¯ä¸ªç±»ã€æ–¹æ³•éƒ½æœ‰æ¸…æ™°çš„æ³¨é‡Šè¯´æ˜
- ğŸ§ª **æ¨¡å—åŒ–è®¾è®¡**: 8,669 è¡Œä»£ç åˆ†å¸ƒåœ¨ 64 ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹³å‡ 135 è¡Œ/æ–‡ä»¶
- ğŸ”„ **ä¿¡å·æ§½è§£è€¦**: UI å’Œä¸šåŠ¡é€»è¾‘å®Œå…¨åˆ†ç¦»

**å¯æ‰©å±•æ€§**:
- ğŸ”Œ **æ’ä»¶åŒ–ç®—æ³•**: æ–°ç®—æ³•åªéœ€å®ç° IThermalAlgorithm æ¥å£å¹¶æ³¨å†Œ
- ğŸ“‚ **æ–‡ä»¶æ ¼å¼æ‰©å±•**: å®ç° IFileReader æ¥å£å³å¯æ”¯æŒæ–°æ ¼å¼
- ğŸ¨ **UI ç»„ä»¶åŒ–**: ThermalChartã€FloatingLabelã€TrapezoidMeasureTool ç­‰å¯å¤ç”¨ç»„ä»¶

**å¯æµ‹è¯•æ€§**:
- âœ… **çº¯å‡½æ•°è®¾è®¡**: ç®—æ³•æ ¸å¿ƒé€»è¾‘æ— å‰¯ä½œç”¨ï¼Œæ˜“äºå•å…ƒæµ‹è¯•
- âœ… **Mock å‹å¥½**: æ¥å£é©±åŠ¨è®¾è®¡ï¼Œæ˜“äºæ›¿æ¢ä¸º Mock å¯¹è±¡
- âœ… **ä¾èµ–æ³¨å…¥**: ApplicationContext é›†ä¸­ç®¡ç†ï¼Œä¾¿äºæ›¿æ¢æµ‹è¯•ä¾èµ–

### æ€§èƒ½ä¼˜åŒ–

- âš¡ **O(1) å†å²æŸ¥è¯¢**: HistoryManager ä» O(n) ä¼˜åŒ–åˆ° O(1)
- âš¡ **é¿å…é‡å¤è®¡ç®—**: åŒæ•°æ®è®¾è®¡ï¼ˆrawData + processedDataï¼‰æ”¯æŒå¿«é€Ÿé‡ç½®
- âš¡ **äº‹ä»¶é©±åŠ¨æ¶æ„**: ä¿¡å·æ§½æœºåˆ¶ï¼ŒæŒ‰éœ€æ›´æ–°ï¼Œé¿å…å…¨å±€åˆ·æ–°

### ç”¨æˆ·ä½“éªŒ

**äº¤äº’è®¾è®¡**:
- ğŸ–±ï¸ **å³é”®æ‹–åŠ¨å¹³ç§»**: ç›´è§‚çš„å›¾è¡¨æ“ä½œ
- ğŸ” **Ctrl+æ»šè½®ç¼©æ”¾**: ç²¾ç¡®æ§åˆ¶ç¼©æ”¾æ¯”ä¾‹
- ğŸ¯ **è‡ªåŠ¨å¸é™„æ›²çº¿**: æµ‹é‡å·¥å…·ç«¯ç‚¹è‡ªåŠ¨å¯¹é½æ•°æ®ç‚¹
- ğŸ“ **æµ®åŠ¨æ ‡ç­¾**: æ”¯æŒæ•°æ®é”šå®šå’Œè§†å›¾é”šå®šä¸¤ç§æ¨¡å¼

**æ•°æ®å®‰å…¨**:
- ğŸ›¡ï¸ **ä¸»æ›²çº¿ä¿æŠ¤**: åŸå§‹æ•°æ®ä¸å¯åˆ é™¤ï¼Œé˜²æ­¢è¯¯æ“ä½œ
- ğŸ”„ **50æ­¥æ’¤é”€/é‡åš**: æ‰€æœ‰æ“ä½œå¯é€†ï¼Œå®¹é”™èƒ½åŠ›å¼º
- ğŸ—‘ï¸ **çº§è”åˆ é™¤**: è‡ªåŠ¨æ¸…ç†å­æ›²çº¿ï¼Œé¿å…å­¤å„¿æ•°æ®

### å·¥ç¨‹å®è·µ

**å¼€å‘è§„èŒƒ**:
- ğŸ“ **UTF-8 ç¼–ç **: å®Œæ•´æ”¯æŒä¸­æ–‡æ³¨é‡Šå’Œæ–‡æ¡£
- ğŸ¯ **å‘½åè§„èŒƒ**: m_å‰ç¼€ã€é©¼å³°å‘½åã€è¯­ä¹‰åŒ–å˜é‡å
- ğŸ“ **ä»£ç é£æ ¼**: ç»Ÿä¸€çš„ç¼©è¿›ã€ç©ºæ ¼ã€èŠ±æ‹¬å·ä½ç½®

**é¡¹ç›®ç®¡ç†**:
- ğŸ“– **è¯¦å°½æ–‡æ¡£**: CLAUDE.mdã€è®¾è®¡æ–‡æ¡£ã€API æ–‡æ¡£ä¸€åº”ä¿±å…¨
- ğŸš€ **è¿­ä»£å¼€å‘**: Phase 1-4 æ¸…æ™°çš„å¼€å‘è·¯çº¿å›¾
- âœ… **åŠŸèƒ½è¿½è¸ª**: å·²å®ŒæˆåŠŸèƒ½æ¸…å•ï¼Œå¼€å‘è¿›åº¦é€æ˜

---

**æ€»ç»“**: è¿™æ˜¯ä¸€ä¸ªå·¥ä¸šçº§çš„çƒ­åˆ†æè½¯ä»¶æ¶æ„ï¼Œè®¾è®¡ç†å¿µå…ˆè¿›ï¼Œä»£ç è´¨é‡é«˜ï¼Œæ–‡æ¡£å®Œå–„ï¼Œéå¸¸é€‚åˆä½œä¸º Qt/C++ æ¡Œé¢åº”ç”¨å¼€å‘å’Œ DDD æ¶æ„å®è·µçš„å­¦ä¹ æ¡ˆä¾‹ã€‚
