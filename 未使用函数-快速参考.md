# 未使用函数 - 快速参考表

## 推荐立即删除 (High Confidence - 4个函数)

| 函数名 | 类名 | 位置 | 访问权限 | 调用数 | 类型 | 删除理由 |
|--------|------|------|--------|-------|------|---------|
| `updateAllCurves()` | CurveViewController | h:59, cpp:73-83 | public | 0 | 方法 | 完全未使用，功能已通过信号实现 |
| `toggleXAxisMode()` | ThermalChart | h:76, cpp:646-650 | public | 0 | 方法 | 便捷包装，未使用，核心功能已有 |
| `rescaleYAxisForXRange()` | ThermalChart | h:206, cpp:1048-1089 | **private** | 0 | 辅助函数 | private方法，完全未使用 |
| `hitThreshold()` | ThermalChartView | h:122, cpp:767-772 | **private** | 0 | 辅助函数 | private方法，逻辑已inline |

**代码行数影响**: ~110 行代码（包含实现）

---

## 谨慎考虑 - 建议保留 (4个函数)

| 函数名 | 类名 | 位置 | 访问权限 | 调用数 | 保留理由 |
|--------|------|------|--------|-------|---------|
| `setCustomTitles()` | ThermalChart | h:107-109 | public | 0 | 公开API，完整批量操作方法 |
| `clearCustomTitles()` | ThermalChart | h:114 | public | 0 | 公开API，对应复位方法 |
| `thermalChart() const` | ThermalChartView | h:52 | public | 0 | 公开getter，符合API设计 |
| `interactionMode() const` | ThermalChartView | h:71 | public | 0 | 公开getter，成本低，未来有用 |

**保留理由**: 标准public API接口，虽然未使用但不违反任何原则

---

## 可选删除 - 根据项目策略 (2个函数)

| 函数名 | 类名 | 位置 | 访问权限 | 调用数 | 条件 |
|--------|------|------|--------|-------|------|
| `primaryAxisY() const` | ThermalChart | h:118 | public | 0 | 如果项目不对外提供API |
| `secondaryAxisY() const` | ThermalChart | h:119 | public | 0 | 有替代方法 `yAxisForCurveId()` |

**说明**: 这两个getter虽然从未使用，但删除需要确认项目策略（是否对外暴露公共API）

---

## 删除检查清单

### 步骤1: 立即删除的4个函数

```bash
# 删除声明
Analysis/src/ui/controller/curve_view_controller.h:59 (updateAllCurves)
Analysis/src/ui/thermal_chart.h:76 (toggleXAxisMode)
Analysis/src/ui/thermal_chart.h:206 (rescaleYAxisForXRange)
Analysis/src/ui/thermal_chart_view.h:122 (hitThreshold)

# 删除实现
Analysis/src/ui/controller/curve_view_controller.cpp:73-83
Analysis/src/ui/thermal_chart.cpp:646-650
Analysis/src/ui/thermal_chart.cpp:1048-1089
Analysis/src/ui/thermal_chart_view.cpp:767-772
```

### 步骤2: 编译验证

```bash
cd Analysis
qmake Analysis.pro
mingw32-make clean
mingw32-make
```

### 步骤3: 搜索验证（确保无残留调用）

```bash
# 检查已删除的函数是否有残留调用
grep -r "updateAllCurves" Analysis/src
grep -r "toggleXAxisMode" Analysis/src
grep -r "rescaleYAxisForXRange" Analysis/src
grep -r "hitThreshold" Analysis/src

# 所有结果应该为空或只显示注释中的提及
```

### 步骤4: 执行测试

```bash
# 运行现有测试套件（如果有）
# ./test_suite.exe
```

---

## 风险评估

### 低风险删除 (4个函数)

| 风险 | 说明 |
|------|------|
| ✅ API破坏 | 低 - 2个private方法，2个未使用public方法 |
| ✅ 运行时影响 | 无 - 完全未被调用 |
| ✅ 向后兼容 | 低 - 项目内未使用，外部难以依赖 |
| ✅ 重构成本 | 低 - 无需调整其他代码 |

### 中等风险评估 (6个其他函数)

| 函数 | 风险等级 | 建议 |
|------|--------|------|
| `setCustomTitles()` | 低 | 保留 - 完整API设计 |
| `clearCustomTitles()` | 低 | 保留 - 对称性设计 |
| `primaryAxisY()` | 中 | 保留或删除（取决于项目策略） |
| `secondaryAxisY()` | 中 | 保留或删除（取决于项目策略） |
| `thermalChart()` | 低 | 保留 - 标准getter |
| `interactionMode()` | 低 | 保留 - 未来可能有用 |

---

## 后续清理建议

删除上述4个函数后，可考虑：

1. **代码审查** - 检查相关调用处是否需要其他优化
   - `handleCurveSelectionClick()` 中直接计算阈值是否合理
   - `setXAxisMode()` 是否应该暴露接口让用户直接切换

2. **注释检查** - 更新相关代码注释
   - 移除指向已删除函数的注释
   - 更新函数文档中的"相关方法"引用

3. **可选清理** - 第二阶段（如需要）
   - 删除 `primaryAxisY()` 和 `secondaryAxisY()`
   - 删除 `setCustomTitles()` 和 `clearCustomTitles()`（如果确认不需要）

---

## 验证命令集

```bash
# 验证删除前
echo "=== 删除前检查 ==="
grep -rn "updateAllCurves()" Analysis/src | wc -l
grep -rn "toggleXAxisMode()" Analysis/src | wc -l
grep -rn "rescaleYAxisForXRange" Analysis/src | wc -l
grep -rn "hitThreshold()" Analysis/src | wc -l

# 期望输出: 2-3行 (只有声明和定义)

# 编译
cd Analysis
qmake Analysis.pro
mingw32-make

# 验证删除后
echo "=== 删除后验证 ==="
grep -rn "updateAllCurves()" Analysis/src | wc -l
# 期望输出: 0

# 代码统计
find Analysis/src -name "*.cpp" -o -name "*.h" | xargs wc -l | tail -1
# 比较前后行数差异
```

---

## 文件变更摘要

| 文件 | 变更 | 行数 |
|------|------|------|
| curve_view_controller.h | 删除声明 | -1 |
| curve_view_controller.cpp | 删除实现 | -11 |
| thermal_chart.h | 删除2个声明 | -2 |
| thermal_chart.cpp | 删除2个实现 | -56 |
| thermal_chart_view.h | 删除声明 | -1 |
| thermal_chart_view.cpp | 删除实现 | -6 |
| **总计** | | **-77 行** |

---

## 参考文档

- 完整分析: `未使用函数删除可行性分析.md`
- 项目规范: `CLAUDE.md`
- 架构设计: `设计文档/04_层次划分总览.md`
